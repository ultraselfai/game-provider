module.exports=[31773,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);let e="http://localhost:3006/api/v1/agent",f="dev-admin-key";function g(){let[a,g]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),x=(0,c.useCallback)(async()=>{try{o(null);let a=await fetch(`${e}/agents`,{headers:{"x-admin-key":f}}),b=await a.json();b.success&&Array.isArray(b.data)||Array.isArray(b.data)?g(b.data):Array.isArray(b)?g(b):o("Falha ao carregar agentes")}catch{o("Erro de conexÃ£o com a API")}finally{m(!1)}},[]);(0,c.useEffect)(()=>{x()},[x]);let y=a.reduce((a,b)=>a+Number(b.spinCredits||0),0),z=a.filter(a=>a.isActive).length;return(0,b.jsxs)("div",{className:"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900",children:[(0,b.jsx)("header",{className:"border-b border-slate-700 bg-slate-800/50 backdrop-blur-sm sticky top-0 z-40",children:(0,b.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-3xl",children:"ðŸŽ°"}),(0,b.jsx)("h1",{className:"text-xl font-bold text-white",children:"Game Provider Admin"})]}),(0,b.jsxs)("nav",{className:"flex gap-6",children:[(0,b.jsx)(d.default,{href:"/",className:"text-slate-400 hover:text-white transition",children:"Dashboard"}),(0,b.jsx)(d.default,{href:"/agents",className:"text-emerald-400 font-medium",children:"Agentes"}),(0,b.jsx)(d.default,{href:"/games",className:"text-slate-400 hover:text-white transition",children:"Games"}),(0,b.jsx)(d.default,{href:"/sessions",className:"text-slate-400 hover:text-white transition",children:"SessÃµes"}),(0,b.jsx)(d.default,{href:"/transactions",className:"text-slate-400 hover:text-white transition",children:"TransaÃ§Ãµes"})]})]})}),(0,b.jsxs)("main",{className:"mx-auto max-w-7xl px-6 py-8",children:[(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Agentes"}),(0,b.jsx)("p",{className:"text-slate-400 text-sm mt-1",children:"Gerencie seus agentes, crÃ©ditos de spin e jogos liberados"})]}),(0,b.jsxs)("button",{onClick:()=>q(!0),className:"flex items-center gap-2 rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-500 transition shadow-lg shadow-emerald-600/20",children:[(0,b.jsx)("span",{children:"âž•"})," Novo Agente"]})]}),(0,b.jsxs)("div",{className:"mb-6 grid gap-4 sm:grid-cols-3",children:[(0,b.jsx)("div",{className:"rounded-xl border border-emerald-500/30 bg-linear-to-br from-emerald-500/20 to-emerald-600/10 p-5",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ‘¥"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Total Agentes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:a.length})]})]})}),(0,b.jsx)("div",{className:"rounded-xl border border-blue-500/30 bg-linear-to-br from-blue-500/20 to-blue-600/10 p-5",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:"âœ…"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Ativos"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:z})]})]})}),(0,b.jsx)("div",{className:"rounded-xl border border-amber-500/30 bg-linear-to-br from-amber-500/20 to-amber-600/10 p-5",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸŽ°"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Total Spins DisponÃ­veis"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-white",children:y.toLocaleString("pt-BR")})]})]})})]}),n&&(0,b.jsxs)("div",{className:"mb-6 rounded-lg bg-red-500/20 border border-red-500/50 p-4 text-red-300 flex items-center gap-2",children:[(0,b.jsx)("span",{children:"âš ï¸"})," ",n]}),l?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-emerald-500 border-t-transparent"})}):(0,b.jsx)("div",{className:"rounded-xl border border-slate-700 bg-slate-800/50 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-700 bg-slate-800",children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-300",children:"Agente"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-300",children:"Contato"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-slate-300",children:"Spins"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center text-sm font-medium text-slate-300",children:"Jogos"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center text-sm font-medium text-slate-300",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-slate-300",children:"AÃ§Ãµes"})]})}),(0,b.jsx)("tbody",{children:0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-400",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)("span",{className:"text-4xl",children:"ðŸ‘¤"}),(0,b.jsx)("p",{children:"Nenhum agente cadastrado"}),(0,b.jsx)("button",{onClick:()=>q(!0),className:"mt-2 text-emerald-400 hover:text-emerald-300",children:"Criar primeiro agente â†’"})]})})}):a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-linear-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-white",children:a.name}),(0,b.jsxs)("code",{className:"text-xs text-slate-500",children:[a.apiKey.slice(0,16),"..."]})]})]})}),(0,b.jsxs)("td",{className:"px-6 py-4",children:[(0,b.jsx)("p",{className:"text-sm text-slate-300",children:a.email}),a.phone&&(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.phone})]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-right",children:[(0,b.jsxs)("p",{className:`text-lg font-bold ${Number(a.spinCredits)>0?"text-emerald-400":"text-slate-400"}`,children:["ðŸŽ° ",Number(a.spinCredits||0).toLocaleString("pt-BR")]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:["Usados: ",Number(a.totalSpinsConsumed||0).toLocaleString("pt-BR")]})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${a.allowedGames?.length===0?"bg-emerald-500/20 text-emerald-300":"bg-purple-500/20 text-purple-300"}`,children:a.allowedGames?.length===0?"ðŸŽ® Todos":`ðŸŽ® ${a.allowedGames?.length}`})}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-medium ${a.isActive?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"}`,children:[(0,b.jsx)("span",{className:`h-1.5 w-1.5 rounded-full ${a.isActive?"bg-emerald-400":"bg-red-400"}`}),a.isActive?"Ativo":"Inativo"]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>w(a),className:"rounded-lg bg-purple-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-purple-500 transition",title:"Gerenciar Jogos",children:"ðŸŽ® Jogos"}),(0,b.jsx)("button",{onClick:()=>s(a),className:"rounded-lg bg-emerald-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-emerald-500 transition",title:"Adicionar CrÃ©dito",children:"ðŸŽ° Spins"}),(0,b.jsx)("button",{onClick:()=>u(a),className:"rounded-lg bg-slate-700 px-3 py-1.5 text-xs font-medium text-slate-300 hover:bg-slate-600 transition",title:"Ver Detalhes",children:"ðŸ‘ï¸"})]})})]},a.id))})]})})]}),p&&(0,b.jsx)(h,{onClose:()=>q(!1),onCreated:()=>{q(!1),x()}}),r&&(0,b.jsx)(i,{agent:r,onClose:()=>s(null),onUpdated:()=>{s(null),x()}}),t&&(0,b.jsx)(j,{agent:t,onClose:()=>u(null)}),v&&(0,b.jsx)(k,{agent:v,onClose:()=>w(null),onUpdated:()=>{w(null),x()}})]})}function h({onClose:a,onCreated:d}){let[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)("10"),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null);async function y(a){a.preventDefault(),t(!0),x(null);try{let a=await fetch(`${e}/agents`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":f},body:JSON.stringify({name:g,email:i,password:k,phone:m||void 0,ggrRate:Number(o),initialBalance:q?Number(q):0})}),b=await a.json();b.success?v({id:b.data.id,apiKey:b.data.apiKey,apiSecret:b.data.apiSecret}):x(b.message||"Erro ao criar agente")}catch{x("Erro de conexÃ£o")}finally{t(!1)}}return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,b.jsx)("div",{className:"w-full max-w-lg rounded-xl border border-slate-700 bg-slate-800 p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-emerald-400",children:[(0,b.jsx)("span",{className:"text-2xl",children:"âœ…"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Agente Criado com Sucesso!"})]}),(0,b.jsx)("div",{className:"mb-4 rounded-lg bg-amber-500/20 border border-amber-500/50 p-3",children:(0,b.jsxs)("p",{className:"text-sm text-amber-300",children:["âš ï¸ ",(0,b.jsx)("strong",{children:"IMPORTANTE:"})," Guarde o API Secret abaixo. Ele ",(0,b.jsx)("strong",{children:"NÃƒO"})," serÃ¡ mostrado novamente!"]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-slate-400 font-medium",children:"API Key"}),(0,b.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,b.jsx)("input",{readOnly:!0,value:u.apiKey,className:"flex-1 rounded-lg bg-slate-900 border border-slate-600 px-3 py-2 text-sm text-emerald-400 font-mono"}),(0,b.jsx)("button",{onClick:()=>navigator.clipboard.writeText(u.apiKey),className:"rounded-lg bg-slate-700 px-3 py-2 text-slate-300 hover:bg-slate-600 transition",children:"ðŸ“‹"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-slate-400 font-medium",children:"API Secret"}),(0,b.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,b.jsx)("input",{readOnly:!0,value:u.apiSecret,className:"flex-1 rounded-lg bg-slate-900 border border-slate-600 px-3 py-2 text-sm text-amber-400 font-mono"}),(0,b.jsx)("button",{onClick:()=>navigator.clipboard.writeText(u.apiSecret),className:"rounded-lg bg-slate-700 px-3 py-2 text-slate-300 hover:bg-slate-600 transition",children:"ðŸ“‹"})]})]})]}),(0,b.jsx)("button",{onClick:d,className:"mt-6 w-full rounded-lg bg-emerald-600 py-2.5 font-medium text-white hover:bg-emerald-500 transition",children:"Entendi, salvei as credenciais"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Novo Agente"}),(0,b.jsx)("button",{onClick:a,className:"text-slate-400 hover:text-white transition",children:"âœ•"})]}),(0,b.jsxs)("form",{onSubmit:y,children:[(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Nome *"}),(0,b.jsx)("input",{type:"text",required:!0,value:g,onChange:a=>h(a.target.value),placeholder:"Ex: Casa de Apostas XYZ",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Email *"}),(0,b.jsx)("input",{type:"email",required:!0,value:i,onChange:a=>j(a.target.value),placeholder:"agente@email.com",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Senha *"}),(0,b.jsx)("input",{type:"password",required:!0,value:k,onChange:a=>l(a.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Telefone"}),(0,b.jsx)("input",{type:"tel",value:m,onChange:a=>n(a.target.value),placeholder:"(11) 99999-9999",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Taxa GGR (%)"}),(0,b.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:o,onChange:a=>p(a.target.value),className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Saldo Inicial (R$)"}),(0,b.jsx)("input",{type:"number",min:"0",step:"0.01",value:q,onChange:a=>r(a.target.value),placeholder:"0.00 (opcional)",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]})]})}),w&&(0,b.jsxs)("div",{className:"mt-4 rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-sm text-red-300",children:["âš ï¸ ",w]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:a,className:"flex-1 rounded-lg border border-slate-600 py-2.5 text-slate-300 hover:bg-slate-700 transition",children:"Cancelar"}),(0,b.jsx)("button",{type:"submit",disabled:s,className:"flex-1 rounded-lg bg-emerald-600 py-2.5 font-medium text-white hover:bg-emerald-500 transition disabled:opacity-50",children:s?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Criando..."]}):"Criar Agente"})]})]})]})})})}function i({agent:a,onClose:d,onUpdated:g}){let[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)("add"),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null);async function t(b){b.preventDefault(),o(!0),q(null),s(null);try{let b=await fetch(`${e}/agents/${a.id}/${"add"===l?"credits":"debit"}`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":f},body:JSON.stringify({credits:Number(h),description:j||void 0})}),c=await b.json();c.success?(s(c.message),setTimeout(()=>{g()},1500)):q(c.message||"Erro na operaÃ§Ã£o")}catch{q("Erro de conexÃ£o")}finally{o(!1)}}return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-xl border border-slate-700 bg-slate-800 p-6 shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Gerenciar Spins"}),(0,b.jsx)("button",{onClick:d,className:"text-slate-400 hover:text-white transition",children:"âœ•"})]}),(0,b.jsx)("div",{className:"mb-6 rounded-lg bg-slate-700/50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-linear-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold text-lg",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-white",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["Spins disponÃ­veis: ",(0,b.jsxs)("span",{className:"text-emerald-400 font-semibold",children:["ðŸŽ° ",Number(a.spinCredits||0).toLocaleString("pt-BR")]})]})]})]})}),(0,b.jsxs)("div",{className:"mb-4 flex rounded-lg bg-slate-900 p-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>m("add"),className:`flex-1 rounded-md py-2 text-sm font-medium transition ${"add"===l?"bg-emerald-600 text-white":"text-slate-400 hover:text-white"}`,children:"âž• Adicionar"}),(0,b.jsx)("button",{type:"button",onClick:()=>m("remove"),className:`flex-1 rounded-md py-2 text-sm font-medium transition ${"remove"===l?"bg-red-600 text-white":"text-slate-400 hover:text-white"}`,children:"âž– Remover"})]}),(0,b.jsxs)("form",{onSubmit:t,children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"Quantidade de Spins *"}),(0,b.jsx)("input",{type:"number",required:!0,min:"1",step:"1",value:h,onChange:a=>i(a.target.value),placeholder:"0",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-3 text-xl text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500 text-center font-bold"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-slate-500 text-center",children:"1 spin = 1 jogada do jogador"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:[100,500,1e3,5e3,1e4].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>i(a.toString()),className:"rounded-lg bg-slate-700 px-3 py-1.5 text-sm text-slate-300 hover:bg-slate-600 transition",children:["ðŸŽ° ",a.toLocaleString("pt-BR")]},a))}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-slate-300 font-medium",children:"DescriÃ§Ã£o"}),(0,b.jsx)("input",{type:"text",value:j,onChange:a=>k(a.target.value),placeholder:"Ex: Compra via PIX #12345",className:"mt-1 w-full rounded-lg bg-slate-900 border border-slate-600 px-3 py-2.5 text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500"})]})]}),p&&(0,b.jsxs)("div",{className:"mt-4 rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-sm text-red-300",children:["âš ï¸ ",p]}),r&&(0,b.jsxs)("div",{className:"mt-4 rounded-lg bg-emerald-500/20 border border-emerald-500/50 p-3 text-sm text-emerald-300",children:["âœ… ",r]}),(0,b.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 rounded-lg border border-slate-600 py-2.5 text-slate-300 hover:bg-slate-700 transition",children:"Cancelar"}),(0,b.jsx)("button",{type:"submit",disabled:n||!h,className:`flex-1 rounded-lg py-2.5 font-medium text-white transition disabled:opacity-50 ${"add"===l?"bg-emerald-600 hover:bg-emerald-500":"bg-red-600 hover:bg-red-500"}`,children:n?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Processando..."]}):"add"===l?`Adicionar ${h||"0"} spins`:`Remover ${h||"0"} spins`})]})]})]})})}function j({agent:a,onClose:d}){let[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null);async function m(){try{let b=await fetch(`${e}/agents/${a.id}/transactions`,{headers:{"x-admin-key":f}}),c=await b.json();c.success&&Array.isArray(c.data)&&h(c.data)}catch(a){console.error("Failed to fetch transactions:",a)}finally{j(!1)}}return(0,c.useEffect)(()=>{m()},[a.id]),(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-2xl rounded-xl border border-slate-700 bg-slate-800 p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Detalhes do Agente"}),(0,b.jsx)("button",{onClick:d,className:"text-slate-400 hover:text-white transition",children:"âœ•"})]}),(0,b.jsx)("div",{className:"mb-6 rounded-lg bg-slate-700/50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full bg-linear-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold text-2xl",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"text-xl font-bold text-white",children:a.name}),(0,b.jsx)("p",{className:"text-slate-400",children:a.email}),a.phone&&(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.phone})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-slate-400",children:"Saldo"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-emerald-400",children:["R$ ",Number(a.balance).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),(0,b.jsxs)("div",{className:"mb-6 grid grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{className:"rounded-lg bg-slate-700/30 p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"GGR Rate"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-purple-400",children:[a.ggrRate,"%"]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-slate-700/30 p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Total Depositado"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-emerald-400",children:["R$ ",Number(a.totalDeposited).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-slate-700/30 p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Total Apostado"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-blue-400",children:["R$ ",Number(a.totalWagered).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-slate-700/30 p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Total Ganho"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-amber-400",children:["R$ ",Number(a.totalWon).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"text-xs text-slate-400 font-medium",children:"API Key"}),(0,b.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,b.jsx)("input",{readOnly:!0,value:a.apiKey,className:"flex-1 rounded-lg bg-slate-900 border border-slate-600 px-3 py-2 text-sm text-emerald-400 font-mono"}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.apiKey,void(navigator.clipboard.writeText(b),l("apiKey"),setTimeout(()=>l(null),2e3))},className:"rounded-lg bg-slate-700 px-3 py-2 text-slate-300 hover:bg-slate-600 transition",children:"apiKey"===k?"âœ…":"ðŸ“‹"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-medium text-slate-300 mb-3",children:"Ãšltimas TransaÃ§Ãµes"}),i?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-emerald-500 border-t-transparent"})}):0===g.length?(0,b.jsx)("div",{className:"text-center py-8 text-slate-500",children:"Nenhuma transaÃ§Ã£o encontrada"}):(0,b.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:g.slice(0,10).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-slate-700/30 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`text-lg ${a.type.includes("DEPOSIT")||a.type.includes("WIN")?"ðŸ’°":a.type.includes("GGR")?"ðŸ“Š":"ðŸ’¸"}`,children:a.type.includes("DEPOSIT")||a.type.includes("WIN")?"ðŸ’°":a.type.includes("GGR")?"ðŸ“Š":"ðŸ’¸"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white",children:a.type.replace(/_/g," ")}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.description||"-"})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:`font-bold ${Number(a.amount)>0?"text-emerald-400":"text-red-400"}`,children:[Number(a.amount)>0?"+":"","R$ ",Number(a.amount).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:new Date(a.createdAt).toLocaleString("pt-BR")})]})]},a.id))})]}),(0,b.jsx)("button",{onClick:d,className:"mt-6 w-full rounded-lg bg-slate-700 py-2.5 font-medium text-white hover:bg-slate-600 transition",children:"Fechar"})]})})}function k({agent:a,onClose:d,onUpdated:g}){let[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(a.allowedGames||[]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(a.allowedGames?.length===0);async function v(){try{let a=await fetch("http://localhost:3006/api/v1/admin/games"),b=await a.json();Array.isArray(b)?i(b):b.success&&Array.isArray(b.data)&&i(b.data)}catch(a){console.error("Failed to fetch games:",a),q("Erro ao carregar jogos")}finally{m(!1)}}async function w(){o(!0),q(null),s(null);try{let b=t?[]:j,c=await fetch(`${e}/agents/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-key":f},body:JSON.stringify({allowedGames:b})}),d=await c.json();d.success?(s(t?"Todos os jogos liberados!":`${j.length} jogo(s) liberado(s)!`),setTimeout(()=>{g()},1500)):q(d.message||"Erro ao salvar")}catch{q("Erro de conexÃ£o")}finally{o(!1)}}return(0,c.useEffect)(()=>{v()},[]),(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-2xl rounded-xl border border-slate-700 bg-slate-800 p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Gerenciar Jogos"}),(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["Selecione quais jogos ",a.name," pode acessar"]})]}),(0,b.jsx)("button",{onClick:d,className:"text-slate-400 hover:text-white transition",children:"âœ•"})]}),(0,b.jsx)("div",{className:"mb-6 rounded-lg bg-slate-700/50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-linear-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold text-lg",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-white",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-slate-400",children:["Jogos liberados: "," ",(0,b.jsx)("span",{className:"text-emerald-400 font-semibold",children:a.allowedGames?.length===0?"Todos":a.allowedGames?.length||0})]})]})]})}),(0,b.jsx)("div",{className:"mb-4 rounded-lg bg-emerald-500/10 border border-emerald-500/30 p-4",children:(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:t,onChange:a=>{var b;u(b=a.target.checked),b&&k([])},className:"w-5 h-5 rounded border-slate-600 bg-slate-900 text-emerald-500 focus:ring-emerald-500 focus:ring-offset-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-white",children:"ðŸŽ® Liberar todos os jogos"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"O agente terÃ¡ acesso a todos os jogos disponÃ­veis, incluindo novos"})]})]})}),!t&&(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-slate-300",children:["Selecione os jogos especÃ­ficos (",j.length," selecionado",1!==j.length?"s":"",")"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>k(h.map(a=>a.gameCode)),className:"text-xs text-emerald-400 hover:text-emerald-300",children:"Selecionar todos"}),(0,b.jsx)("span",{className:"text-slate-600",children:"|"}),(0,b.jsx)("button",{type:"button",onClick:()=>k([]),className:"text-xs text-slate-400 hover:text-slate-300",children:"Limpar seleÃ§Ã£o"})]})]}),l?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-emerald-500 border-t-transparent"})}):(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-80 overflow-y-auto p-1",children:h.map(a=>(0,b.jsxs)("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition ${j.includes(a.gameCode)?"bg-emerald-500/20 border border-emerald-500/50":"bg-slate-700/30 border border-transparent hover:bg-slate-700/50"}`,children:[(0,b.jsx)("input",{type:"checkbox",checked:j.includes(a.gameCode),onChange:()=>{var b;return b=a.gameCode,void(t?(u(!1),k([b])):k(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b]))},className:"w-4 h-4 rounded border-slate-600 bg-slate-900 text-emerald-500 focus:ring-emerald-500 focus:ring-offset-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white truncate",children:a.gameName}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[a.provider," â€¢ RTP ",a.rtp,"%"]})]})]},a.gameCode))})]})}),p&&(0,b.jsxs)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-sm text-red-300",children:["âš ï¸ ",p]}),r&&(0,b.jsxs)("div",{className:"mb-4 rounded-lg bg-emerald-500/20 border border-emerald-500/50 p-3 text-sm text-emerald-300",children:["âœ… ",r]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 rounded-lg border border-slate-600 py-2.5 text-slate-300 hover:bg-slate-700 transition",children:"Cancelar"}),(0,b.jsx)("button",{onClick:w,disabled:n||!t&&0===j.length,className:"flex-1 rounded-lg bg-emerald-600 py-2.5 font-medium text-white hover:bg-emerald-500 transition disabled:opacity-50",children:n?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Salvando..."]}):"Salvar AlteraÃ§Ãµes"})]})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_agents_page_tsx_910fc9d7._.js.map