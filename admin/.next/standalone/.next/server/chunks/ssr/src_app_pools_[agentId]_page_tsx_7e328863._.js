module.exports=[56046,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(60446),g=a.i(91119),h=a.i(99570),i=a.i(86304),j=a.i(66718),k=a.i(70430),l=a.i(14574),m=a.i(33140),n=a.i(70106);let o=(0,n.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=a.i(69520),q=a.i(56738);let r=(0,n.default)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);var s=a.i(1027),t=a.i(96221),u=a.i(43108);let v=(0,n.default)("scale",[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]]);var w=a.i(90166),x=a.i(90669),y=a.i(24669),z=a.i(92e3),A=a.i(28822),B=a.i(72089);let C=(0,n.default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),D=(0,n.default)("arrow-up-from-line",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);var E=a.i(21161),F=a.i(95957);function G(a){return null==a?"R$ 0,00":a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function H(a){return"retention"===a?"destructive":"release"===a?"default":"secondary"}function I(a){switch(a){case"retention":return"ðŸ”’ RetenÃ§Ã£o";case"normal":return"âš–ï¸ Normal";case"release":return"ðŸ’° LiberaÃ§Ã£o";default:return a}}function J(){var a;let n=(0,d.useParams)(),J=n?.agentId,[K,L]=(0,c.useState)(!0),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)([]),[W,X]=(0,c.useState)("24h"),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(!1),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)(""),[ag,ah]=(0,c.useState)(!1);async function ai(){L(!0),N(null);let a={agentId:J,agentName:J,balance:0,currentPhase:"normal",lastUpdated:new Date().toISOString()};try{try{let b=await (0,F.fetchPoolDetails)(J);b?.success&&b?.data?P({agentId:b.data.agentId||J,agentName:b.data.agentName||J,balance:b.data.balance??0,currentPhase:b.data.currentPhase||"normal",lastUpdated:b.data.lastUpdated||new Date().toISOString()}):P(a)}catch{P(a)}try{let a=await (0,F.fetchPoolLimits)(J);a?.canPlay!==void 0?R(a):R({canPlay:!0,maxBetPayout:1e4})}catch{R({canPlay:!0,maxBetPayout:1e4})}try{let a=await (0,F.fetchPoolStats)(J,W);T(a)}catch{T(null)}try{let a=await (0,F.fetchPoolTransactions)(J,{limit:50});if(a?.transactions&&Array.isArray(a.transactions)){let b=a.transactions.map(a=>({id:a.id,type:a.type,amount:a.amount??0,balanceAfter:a.balanceAfter??0,createdAt:a.createdAt}));V(b)}else V([])}catch{V([])}}catch(b){N("Erro ao carregar dados do pool"),P(a)}finally{L(!1)}}async function aj(){let a=parseFloat(ac);if(isNaN(a)||a<=0)return void alert("Digite um valor vÃ¡lido");ah(!0);try{await (0,F.adminDepositToPool)(J,a,ae||"DepÃ³sito administrativo"),Z(!1),ad(""),af(""),ai()}catch(a){alert("Erro ao depositar")}finally{ah(!1)}}async function ak(){let a=parseFloat(ac);if(isNaN(a)||a<=0)return void alert("Digite um valor vÃ¡lido");if(O&&a>O.balance)return void alert("Saldo insuficiente");ah(!0);try{await (0,F.adminWithdrawFromPool)(J,a,ae||"Saque administrativo"),_(!1),ad(""),af(""),ai()}catch(a){alert("Erro ao sacar")}finally{ah(!1)}}async function al(a){ah(!0);try{await (0,F.adminSetPoolPhase)(J,a),ab(!1),ai()}catch(a){alert("Erro ao alterar fase")}finally{ah(!1)}}return((0,c.useEffect)(()=>{J&&ai()},[J,W]),K)?(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(m.Skeleton,{className:"h-16 w-16 rounded-full"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(m.Skeleton,{className:"h-6 w-40"}),(0,b.jsx)(m.Skeleton,{className:"h-4 w-60"})]})]}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(a=>(0,b.jsx)(m.Skeleton,{className:"h-32 rounded-xl"},a))}),(0,b.jsx)(m.Skeleton,{className:"h-64 rounded-xl"})]})}):M||!O?(0,b.jsx)(f.default,{children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,b.jsx)(z.AlertCircle,{className:"h-16 w-16 text-destructive mb-4"}),(0,b.jsx)("p",{className:"text-xl text-destructive mb-4",children:M||"Pool nÃ£o encontrado"}),(0,b.jsx)(h.Button,{asChild:!0,variant:"outline",children:(0,b.jsxs)(e.default,{href:"/pools",children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-2"}),"Voltar para Pools"]})})]})}):(0,b.jsxs)(f.default,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(h.Button,{asChild:!0,variant:"ghost",size:"sm",children:(0,b.jsxs)(e.default,{href:"/pools",children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-2"}),"Voltar para Pools"]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white text-2xl font-bold",children:O.agentName?.charAt(0)?.toUpperCase()||"?"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:O.agentName||"Agente"}),(0,b.jsx)("p",{className:"text-muted-foreground font-mono text-sm",children:J})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(h.Button,{onClick:()=>Z(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,b.jsx)(q.Wallet,{className:"h-4 w-4 mr-2"}),"Depositar"]}),(0,b.jsxs)(h.Button,{onClick:()=>_(!0),variant:"secondary",className:"bg-amber-600 hover:bg-amber-700 text-white",children:[(0,b.jsx)(r,{className:"h-4 w-4 mr-2"}),"Sacar"]}),(0,b.jsxs)(h.Button,{onClick:()=>ab(!0),variant:"secondary",className:"bg-purple-600 hover:bg-purple-700 text-white",children:[(0,b.jsx)(s.Zap,{className:"h-4 w-4 mr-2"}),"Alterar Fase"]}),(0,b.jsx)(h.Button,{onClick:ai,variant:"outline",size:"icon",children:(0,b.jsx)(p.RefreshCw,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(g.Card,{className:"border-emerald-500/30 bg-emerald-500/5",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)(g.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(w.DollarSign,{className:"h-4 w-4"}),"Saldo do Pool"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("p",{className:`text-3xl font-bold ${O.balance>0?"text-emerald-500":"text-destructive"}`,children:G(O.balance)})})]}),(0,b.jsxs)(g.Card,{className:"retention"===O.currentPhase?"border-destructive/30 bg-destructive/5":"release"===O.currentPhase?"border-emerald-500/30 bg-emerald-500/5":"border-amber-500/30 bg-amber-500/5",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)(g.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(x.Activity,{className:"h-4 w-4"}),"Fase Atual"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(i.Badge,{variant:H(O.currentPhase),className:"text-lg py-1 px-3",children:I(O.currentPhase)})})]}),(0,b.jsxs)(g.Card,{className:"border-blue-500/30 bg-blue-500/5",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsxs)(g.CardTitle,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,b.jsx)(y.TrendingUp,{className:"h-4 w-4"}),"Payout MÃ¡ximo"]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:Q?G(Q.maxBetPayout):"N/A"})})]}),(0,b.jsxs)(g.Card,{className:Q?.canPlay?"border-emerald-500/30 bg-emerald-500/5":"border-destructive/30 bg-destructive/5",children:[(0,b.jsx)(g.CardHeader,{className:"pb-2",children:(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Status"})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)(i.Badge,{variant:Q?.canPlay?"default":"destructive",className:"text-lg py-1 px-3",children:Q?.canPlay?"âœ… Operando":"âŒ Bloqueado"})})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Activity,{className:"h-5 w-5"}),"EstatÃ­sticas"]}),(0,b.jsx)("div",{className:"flex gap-2",children:["1h","24h","7d","30d"].map(a=>(0,b.jsx)(h.Button,{variant:W===a?"default":"outline",size:"sm",onClick:()=>X(a),children:a},a))})]})}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:S?.spinsCount?.toLocaleString()||0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Spins"})]}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:G(S?.totalBets||0)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Apostas"})]}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-500",children:G(S?.totalWins||0)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Pagamentos"})]}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("p",{className:`text-2xl font-bold ${(S?.ggr||0)>=0?"text-emerald-500":"text-destructive"}`,children:G(S?.ggr||0)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"GGR"})]}),(0,b.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4 text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-500",children:null==(a=S?.rtp||0)?"0.0%":`${(100*a).toFixed(1)}%`}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"RTP"})]})]})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"flex items-center gap-2",children:"ðŸ“‹ Ãšltimas TransaÃ§Ãµes"})}),(0,b.jsx)(g.CardContent,{children:0===U.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)("span",{className:"text-3xl block mb-2",children:"ðŸ“­"}),(0,b.jsx)("p",{children:"Nenhuma transaÃ§Ã£o ainda"})]}):(0,b.jsx)("div",{className:"divide-y divide-border max-h-96 overflow-y-auto",children:U.map((a,c)=>(0,b.jsxs)("div",{className:"py-3 flex items-center justify-between hover:bg-muted/50 px-2 rounded-lg transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center bg-muted",children:["bet"===a.type&&(0,b.jsx)(A.Dices,{className:"h-4 w-4 text-purple-400"}),"win"===a.type&&(0,b.jsx)(B.Coins,{className:"h-4 w-4 text-amber-400"}),"deposit"===a.type&&(0,b.jsx)(C,{className:"h-4 w-4 text-emerald-400"}),"withdraw"===a.type&&(0,b.jsx)(D,{className:"h-4 w-4 text-red-400"}),"adjustment"===a.type&&(0,b.jsx)(E.Settings,{className:"h-4 w-4 text-blue-400"}),"phase_change"===a.type&&(0,b.jsx)(s.Zap,{className:"h-4 w-4 text-yellow-400"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium capitalize",children:a.type}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString("pt-BR")})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:`font-bold ${a.amount>=0?"text-emerald-500":"text-destructive"}`,children:[a.amount>=0?"+":"",G(a.amount)]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:G(a.balanceAfter)})]})]},a.id||c))})})]})]}),(0,b.jsx)(l.Dialog,{open:Y,onOpenChange:Z,children:(0,b.jsxs)(l.DialogContent,{children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Wallet,{className:"h-5 w-5"}),"Depositar no Pool"]}),(0,b.jsx)(l.DialogDescription,{children:"Adicione saldo ao pool do agente"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"deposit-amount",children:"Valor (R$)"}),(0,b.jsx)(j.Input,{id:"deposit-amount",type:"number",value:ac,onChange:a=>ad(a.target.value),placeholder:"0.00",min:"0",step:"0.01"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"deposit-desc",children:"DescriÃ§Ã£o (opcional)"}),(0,b.jsx)(j.Input,{id:"deposit-desc",type:"text",value:ae,onChange:a=>af(a.target.value),placeholder:"DepÃ³sito administrativo"})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,b.jsx)(h.Button,{variant:"outline",className:"flex-1",onClick:()=>Z(!1),children:"Cancelar"}),(0,b.jsx)(h.Button,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:aj,disabled:ag,children:ag?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Processando..."]}):"Confirmar"})]})]})}),(0,b.jsx)(l.Dialog,{open:$,onOpenChange:_,children:(0,b.jsxs)(l.DialogContent,{children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(r,{className:"h-5 w-5"}),"Sacar do Pool"]}),(0,b.jsxs)(l.DialogDescription,{children:["Saldo disponÃ­vel: ",(0,b.jsx)("span",{className:"text-emerald-500 font-bold",children:G(O.balance)})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"withdraw-amount",children:"Valor (R$)"}),(0,b.jsx)(j.Input,{id:"withdraw-amount",type:"number",value:ac,onChange:a=>ad(a.target.value),placeholder:"0.00",min:"0",max:O.balance,step:"0.01"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"withdraw-desc",children:"DescriÃ§Ã£o (opcional)"}),(0,b.jsx)(j.Input,{id:"withdraw-desc",type:"text",value:ae,onChange:a=>af(a.target.value),placeholder:"Saque administrativo"})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,b.jsx)(h.Button,{variant:"outline",className:"flex-1",onClick:()=>_(!1),children:"Cancelar"}),(0,b.jsx)(h.Button,{className:"flex-1 bg-amber-600 hover:bg-amber-700",onClick:ak,disabled:ag,children:ag?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Processando..."]}):"Confirmar"})]})]})}),(0,b.jsx)(l.Dialog,{open:aa,onOpenChange:ab,children:(0,b.jsxs)(l.DialogContent,{children:[(0,b.jsxs)(l.DialogHeader,{children:[(0,b.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Zap,{className:"h-5 w-5"}),"Alterar Fase"]}),(0,b.jsxs)(l.DialogDescription,{children:["Fase atual: ",(0,b.jsx)(i.Badge,{variant:H(O.currentPhase),children:I(O.currentPhase)})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start bg-destructive/10 border-destructive/30 text-destructive hover:bg-destructive/20",onClick:()=>al("retention"),disabled:ag||"retention"===O.currentPhase,children:[(0,b.jsx)(u.Lock,{className:"h-4 w-4 mr-2"}),"RetenÃ§Ã£o (10% win chance)"]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start bg-amber-500/10 border-amber-500/30 text-amber-500 hover:bg-amber-500/20",onClick:()=>al("normal"),disabled:ag||"normal"===O.currentPhase,children:[(0,b.jsx)(v,{className:"h-4 w-4 mr-2"}),"Normal (35% win chance)"]}),(0,b.jsxs)(h.Button,{variant:"outline",className:"w-full justify-start bg-emerald-500/10 border-emerald-500/30 text-emerald-500 hover:bg-emerald-500/20",onClick:()=>al("release"),disabled:ag||"release"===O.currentPhase,children:[(0,b.jsx)(w.DollarSign,{className:"h-4 w-4 mr-2"}),"LiberaÃ§Ã£o (65% win chance)"]})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(h.Button,{variant:"outline",className:"w-full",onClick:()=>ab(!1),children:"Cancelar"})})]})})]})}a.s(["default",()=>J],56046)}];

//# sourceMappingURL=src_app_pools_%5BagentId%5D_page_tsx_7e328863._.js.map