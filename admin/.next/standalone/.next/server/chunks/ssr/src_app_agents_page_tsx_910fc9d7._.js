module.exports=[31773,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(60446),e=a.i(91119),f=a.i(99570),g=a.i(66718),h=a.i(86304),i=a.i(14574),j=a.i(6015),k=a.i(75083),l=a.i(60246),m=a.i(15618),n=a.i(69520),o=a.i(87532),p=a.i(90166),q=a.i(39646),r=a.i(77156),s=a.i(5151),t=a.i(33441),u=a.i(92e3);let v=(0,a.i(70106).default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var w=a.i(43108),x=a.i(72089),y=a.i(2759);let z=["fortunetiger","fortunemouse","fortunerabbit","fortuneox","fortunepanda","phoenixrises","hoodvswoolf"];function A(){let[a,i]=(0,c.useState)([]),[k,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(null);async function J(){s(!0);try{let a=await fetch(`${y.AGENT_API}/agents`,{headers:{"x-admin-key":y.ADMIN_KEY}}),b=await a.json();b.success&&Array.isArray(b.data)&&i(b.data)}catch(a){console.error("Failed to fetch agents:",a)}finally{s(!1)}}(0,c.useEffect)(()=>{J()},[]);let K=a.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.email.toLowerCase().includes(t.toLowerCase())),L={totalAgents:a.length,activeAgents:a.filter(a=>a.isActive).length,totalSpins:a.reduce((a,b)=>a+Number(b.totalSpinsConsumed||0),0)};return(0,b.jsxs)(d.default,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Agentes"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie os agentes parceiros da plataforma"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:J,disabled:k,children:(0,b.jsx)(n.RefreshCw,{className:`h-4 w-4 ${k?"animate-spin":""}`})}),(0,b.jsxs)(f.Button,{onClick:()=>w(!0),children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Novo Agente"]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total de Agentes"}),(0,b.jsx)(l.Users,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:L.totalAgents}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"registrados na plataforma"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Agentes Ativos"}),(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-500",children:L.activeAgents}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"operando ativamente"})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"CrÃ©ditos Consumidos"}),(0,b.jsx)(q.Gamepad2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:L.totalSpins.toLocaleString("pt-BR")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"crÃ©ditos utilizados"})]})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:(0,b.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,b.jsx)(o.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Buscar agente...",value:t,onChange:a=>u(a.target.value),className:"pl-10"})]})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Lista de Agentes"}),(0,b.jsxs)(e.CardDescription,{children:[K.length," agente",1!==K.length?"s":""," encontrado",1!==K.length?"s":""]})]}),(0,b.jsx)(e.CardContent,{children:k?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(n.RefreshCw,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===K.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,b.jsx)(l.Users,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"Nenhum agente encontrado"})]}):(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Agente"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Saldo / CrÃ©ditos"}),(0,b.jsx)(j.TableHead,{className:"text-center",children:"Jogos"}),(0,b.jsx)(j.TableHead,{className:"text-center",children:"Status"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"AÃ§Ãµes"})]})}),(0,b.jsx)(j.TableBody,{children:K.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.email})]})]})}),(0,b.jsxs)(j.TableCell,{className:"text-right",children:[(0,b.jsxs)("p",{className:`text-lg font-bold flex items-center justify-end gap-1.5 ${(Number(a.spinCredits)||0)>0?"text-emerald-500":"text-muted-foreground"}`,children:[(0,b.jsx)(x.Coins,{className:"h-4 w-4"}),(Number(a.spinCredits)||0).toLocaleString("pt-BR")," crÃ©ditos"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"GGR: 10%"})]}),(0,b.jsx)(j.TableCell,{className:"text-center",children:(0,b.jsx)(h.Badge,{variant:"secondary",className:"bg-purple-500/20 text-purple-400 border-purple-500/50",children:"PGSOFT"})}),(0,b.jsx)(j.TableCell,{className:"text-center",children:(0,b.jsxs)(h.Badge,{variant:a.isActive?"default":"destructive",className:a.isActive?"bg-emerald-500/20 text-emerald-500 hover:bg-emerald-500/30":"",children:[(0,b.jsx)("span",{className:`mr-1.5 h-1.5 w-1.5 rounded-full ${a.isActive?"bg-emerald-500":"bg-red-500"}`}),a.isActive?"Ativo":"Inativo"]})}),(0,b.jsx)(j.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>I(a),children:[(0,b.jsx)(q.Gamepad2,{className:"h-4 w-4 mr-1"}),"Jogos"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>A(a),className:"text-emerald-500 border-emerald-500/50 hover:bg-emerald-500/10",children:[(0,b.jsx)(p.DollarSign,{className:"h-4 w-4 mr-1"}),"CrÃ©ditos"]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>G(a),children:(0,b.jsx)(r.Eye,{className:"h-4 w-4"})})]})})]},a.id))})]})})]})]}),(0,b.jsx)(B,{open:v,onClose:()=>w(!1),onCreated:()=>{w(!1),J()}}),z&&(0,b.jsx)(C,{agent:z,onClose:()=>A(null),onUpdated:()=>{A(null),J()}}),F&&(0,b.jsx)(D,{agent:F,onClose:()=>G(null)}),H&&(0,b.jsx)(E,{agent:H,onClose:()=>I(null),onUpdated:()=>{I(null),J()}})]})}function B({open:a,onClose:d,onCreated:e}){let[h,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)("10"),[v,w]=(0,c.useState)(""),[x,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null);function E(){j(""),l(""),o(""),q(""),s("10"),w(""),B(null),D(null)}function G(){E(),d()}async function H(a){a.preventDefault(),z(!0),D(null);try{let a=await fetch(`${y.AGENT_API}/agents`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":y.ADMIN_KEY},body:JSON.stringify({name:h,email:k,password:m,phone:p||void 0,ggrRate:Number(r),initialBalance:v?Number(v):0})}),b=await a.json();b.success?B({id:b.data.id,apiKey:b.data.apiKey,apiSecret:b.data.apiSecret}):D(b.message||"Erro ao criar agente")}catch{D("Erro de conexÃ£o")}finally{z(!1)}}return(0,b.jsx)(i.Dialog,{open:a,onOpenChange:a=>!a&&G(),children:(0,b.jsx)(i.DialogContent,{className:"max-w-lg",children:A?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsxs)(i.DialogTitle,{className:"flex items-center gap-2 text-emerald-500",children:[(0,b.jsx)(t.Check,{className:"h-5 w-5"}),"Agente Criado com Sucesso!"]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-lg bg-amber-500/20 border border-amber-500/50 p-3",children:(0,b.jsxs)("p",{className:"text-sm text-amber-500 flex items-center gap-2",children:[(0,b.jsx)(u.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)("strong",{children:"IMPORTANTE:"})," Guarde o API Secret abaixo. Ele ",(0,b.jsx)("strong",{children:"NÃƒO"})," serÃ¡ mostrado novamente!"]})}),(0,b.jsx)(F,{label:"API Key",value:A.apiKey,className:"text-emerald-500"}),(0,b.jsx)(F,{label:"API Secret",value:A.apiSecret,className:"text-amber-500"}),(0,b.jsx)(f.Button,{onClick:()=>{E(),e()},className:"w-full",children:"Entendi, salvei as credenciais"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Novo Agente"}),(0,b.jsx)(i.DialogDescription,{children:"Preencha os dados para criar um novo agente parceiro"})]}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Nome *"}),(0,b.jsx)(g.Input,{required:!0,value:h,onChange:a=>j(a.target.value),placeholder:"Ex: Casa de Apostas XYZ"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Email *"}),(0,b.jsx)(g.Input,{type:"email",required:!0,value:k,onChange:a=>l(a.target.value),placeholder:"agente@email.com"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Senha *"}),(0,b.jsx)(g.Input,{type:"password",required:!0,value:m,onChange:a=>o(a.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Telefone"}),(0,b.jsx)(g.Input,{type:"tel",value:p,onChange:a=>q(a.target.value),placeholder:"(11) 99999-9999"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Taxa GGR (%)"}),(0,b.jsx)(g.Input,{type:"number",min:"0",max:"100",step:"0.1",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Saldo Inicial (R$)"}),(0,b.jsx)(g.Input,{type:"number",min:"0",step:"0.01",value:v,onChange:a=>w(a.target.value),placeholder:"0.00 (opcional)"})]})]}),C&&(0,b.jsxs)("div",{className:"rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-sm text-red-500 flex items-center gap-2",children:[(0,b.jsx)(u.AlertCircle,{className:"h-4 w-4"}),C]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:G,children:"Cancelar"}),(0,b.jsx)(f.Button,{type:"submit",disabled:x,children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Criando..."]}):"Criar Agente"})]})]})]})})})}function C({agent:a,onClose:d,onUpdated:e}){let[h,j]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[o,p]=(0,c.useState)("add"),[q,r]=(0,c.useState)(!1),[s,v]=(0,c.useState)(null),[w,z]=(0,c.useState)(null);async function A(b){b.preventDefault(),r(!0),v(null),z(null);let c="add"===o?"credits":"debit";try{let b=await fetch(`${y.AGENT_API}/agents/${a.id}/${c}`,{method:"POST",headers:{"Content-Type":"application/json","x-admin-key":y.ADMIN_KEY},body:JSON.stringify({credits:Number(h),description:l||void 0})}),d=await b.json();d.success?(z(d.message),setTimeout(()=>{e()},1500)):v(d.message||"Erro na operaÃ§Ã£o")}catch{v("Erro de conexÃ£o")}finally{r(!1)}}return(0,b.jsx)(i.Dialog,{open:!0,onOpenChange:a=>!a&&d(),children:(0,b.jsxs)(i.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Gerenciar CrÃ©ditos"}),(0,b.jsx)(i.DialogDescription,{children:"Adicionar ou remover crÃ©ditos do agente"})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold text-lg",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["CrÃ©ditos disponÃ­veis: ",(0,b.jsxs)("span",{className:"text-emerald-500 font-semibold inline-flex items-center gap-1",children:[(0,b.jsx)(x.Coins,{className:"h-3.5 w-3.5"})," ",Number(a.spinCredits||0).toLocaleString("pt-BR")]})]})]})]})}),(0,b.jsx)(k.Tabs,{value:o,onValueChange:a=>p(a),children:(0,b.jsxs)(k.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(k.TabsTrigger,{value:"add",children:"âž• Adicionar"}),(0,b.jsx)(k.TabsTrigger,{value:"remove",children:"âž– Remover"})]})}),(0,b.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Quantidade de CrÃ©ditos *"}),(0,b.jsx)(g.Input,{type:"number",required:!0,min:"1",step:"1",value:h,onChange:a=>j(a.target.value),placeholder:"0",className:"text-xl text-center font-bold mt-1"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-1",children:"1 crÃ©dito = 1 jogada do jogador"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:[100,500,1e3,5e3,1e4].map(a=>(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>j(a.toString()),children:[(0,b.jsx)(x.Coins,{className:"h-3.5 w-3.5 mr-1"}),a.toLocaleString("pt-BR")]},a))}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"DescriÃ§Ã£o"}),(0,b.jsx)(g.Input,{value:l,onChange:a=>m(a.target.value),placeholder:"Ex: Compra via PIX #12345"})]}),s&&(0,b.jsxs)("div",{className:"rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-sm text-red-500 flex items-center gap-2",children:[(0,b.jsx)(u.AlertCircle,{className:"h-4 w-4"}),s]}),w&&(0,b.jsxs)("div",{className:"rounded-lg bg-emerald-500/20 border border-emerald-500/50 p-3 text-sm text-emerald-500 flex items-center gap-2",children:[(0,b.jsx)(t.Check,{className:"h-4 w-4"}),w]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:d,children:"Cancelar"}),(0,b.jsx)(f.Button,{type:"submit",disabled:q||!h,variant:"remove"===o?"destructive":"default",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Processando..."]}):"add"===o?`Adicionar ${h||"0"} cr\xe9ditos`:`Remover ${h||"0"} cr\xe9ditos`})]})]})]})})}function D({agent:a,onClose:d}){let[h,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[x,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null);async function C(){try{let b=await fetch(`${y.AGENT_API}/agents/${a.id}/transactions`,{headers:{"x-admin-key":y.ADMIN_KEY}}),c=await b.json();c.success&&Array.isArray(c.data)&&j(c.data)}catch(a){console.error("Failed to fetch transactions:",a)}finally{l(!1)}}async function D(b){if(b.preventDefault(),B(null),p.length<6)return void B({type:"error",text:"Senha deve ter pelo menos 6 caracteres"});if(p!==r)return void B({type:"error",text:"As senhas nÃ£o conferem"});z(!0);try{let b=await fetch(`${y.AGENT_API}/agents/${a.id}/password`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-key":y.ADMIN_KEY},body:JSON.stringify({newPassword:p})}),c=await b.json();c.success?(B({type:"success",text:"Senha alterada com sucesso!"}),q(""),s(""),o(!1)):B({type:"error",text:c.message||"Erro ao alterar senha"})}catch{B({type:"error",text:"Erro de conexÃ£o"})}finally{z(!1)}}return(0,c.useEffect)(()=>{C()},[a.id]),(0,b.jsx)(i.Dialog,{open:!0,onOpenChange:a=>!a&&d(),children:(0,b.jsxs)(i.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:"Detalhes do Agente"})}),(0,b.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold text-2xl",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"text-xl font-bold",children:a.name}),(0,b.jsx)("p",{className:"text-muted-foreground",children:a.email}),a.phone&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.phone})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Saldo"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-emerald-500",children:["R$ ",(Number(a.balance)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,b.jsxs)(e.Card,{className:"p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"GGR Rate"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-purple-500",children:[a.ggrRate||0,"%"]})]}),(0,b.jsxs)(e.Card,{className:"p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Depositado"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-emerald-500",children:["R$ ",(Number(a.totalDeposited)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,b.jsxs)(e.Card,{className:"p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Apostado"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-blue-500",children:["R$ ",(Number(a.totalWagered)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,b.jsxs)(e.Card,{className:"p-3 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Ganho"}),(0,b.jsxs)("p",{className:"text-lg font-bold text-amber-500",children:["R$ ",(Number(a.totalWon)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,b.jsx)(F,{label:"API Key",value:a.apiKey,icon:(0,b.jsx)(v,{className:"h-4 w-4"})}),(0,b.jsxs)(e.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h5",{className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(w.Lock,{className:"h-4 w-4"}),"Senha do Agente"]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>o(!m),children:m?"Cancelar":"Alterar Senha"})]}),A&&(0,b.jsxs)("div",{className:`mb-3 p-2 rounded text-sm flex items-center gap-2 ${"success"===A.type?"bg-emerald-500/20 text-emerald-500":"bg-red-500/20 text-red-500"}`,children:["success"===A.type?(0,b.jsx)(t.Check,{className:"h-4 w-4"}):(0,b.jsx)(u.AlertCircle,{className:"h-4 w-4"}),A.text]}),m&&(0,b.jsxs)("form",{onSubmit:D,className:"space-y-3",children:[(0,b.jsx)(g.Input,{type:"password",value:p,onChange:a=>q(a.target.value),placeholder:"Nova senha (mÃ­n. 6 caracteres)",required:!0}),(0,b.jsx)(g.Input,{type:"password",value:r,onChange:a=>s(a.target.value),placeholder:"Confirmar nova senha",required:!0}),(0,b.jsx)(f.Button,{type:"submit",disabled:x,className:"w-full",children:x?"Salvando...":"Salvar Nova Senha"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-medium mb-3",children:"Ãšltimas TransaÃ§Ãµes"}),k?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(n.RefreshCw,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===h.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma transaÃ§Ã£o encontrada"}):(0,b.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:h.slice(0,10).map(a=>(0,b.jsx)(e.Card,{className:"p-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-lg",children:a.type.includes("DEPOSIT")||a.type.includes("WIN")?"ðŸ’°":a.type.includes("GGR")?"ðŸ“Š":"ðŸ’¸"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.type.replace(/_/g," ")}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description||"-"})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:`font-bold ${Number(a.amount)>0?"text-emerald-500":"text-red-500"}`,children:[Number(a.amount)>0?"+":"","R$ ",Number(a.amount).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString("pt-BR")})]})]})},a.id))})]}),(0,b.jsx)(i.DialogFooter,{children:(0,b.jsx)(f.Button,{variant:"outline",onClick:d,children:"Fechar"})})]})})}function E({agent:a,onClose:d,onUpdated:g}){let[h,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(a.allowedGames||[]),[m,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),[x,A]=(0,c.useState)(a.allowedGames?.length===0);async function B(){try{let a=await fetch(`${y.ADMIN_API}/games`),b=await a.json(),c=[];Array.isArray(b)?c=b:b.success&&Array.isArray(b.data)&&(c=b.data);let d=c.filter(a=>z.includes(a.gameCode));j(d)}catch(a){console.error("Failed to fetch games:",a),s("Erro ao carregar jogos")}finally{o(!1)}}async function C(){q(!0),s(null),w(null);try{let b=x?[]:k,c=await fetch(`${y.AGENT_API}/agents/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json","x-admin-key":y.ADMIN_KEY},body:JSON.stringify({allowedGames:b})}),d=await c.json();d.success?(w(x?"Todos os jogos liberados!":`${k.length} jogo(s) liberado(s)!`),setTimeout(()=>{g()},1500)):s(d.message||"Erro ao salvar")}catch{s("Erro de conexÃ£o")}finally{q(!1)}}return(0,c.useEffect)(()=>{B()},[]),(0,b.jsx)(i.Dialog,{open:!0,onOpenChange:a=>!a&&d(),children:(0,b.jsxs)(i.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Gerenciar Jogos"}),(0,b.jsxs)(i.DialogDescription,{children:["Selecione quais jogos ",a.name," pode acessar"]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-white font-bold text-lg",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Jogos liberados: "," ",(0,b.jsx)("span",{className:"text-emerald-500 font-semibold",children:a.allowedGames?.length===0?"Todos":a.allowedGames?.length||0})]})]})]})}),(0,b.jsx)(e.Card,{className:"p-4 border-emerald-500/30 bg-emerald-500/10",children:(0,b.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:x,onChange:a=>{var b;A(b=a.target.checked),b&&l([])},className:"w-5 h-5 rounded border-muted bg-background text-emerald-500 focus:ring-emerald-500 focus:ring-offset-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"ðŸŽ® Liberar todos os jogos"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"O agente terÃ¡ acesso a todos os jogos disponÃ­veis, incluindo novos"})]})]})}),!x&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("p",{className:"text-sm font-medium",children:["Selecione os jogos especÃ­ficos (",k.length," selecionado",1!==k.length?"s":"",")"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>l(h.map(a=>a.gameCode)),children:"Selecionar todos"}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>l([]),children:"Limpar seleÃ§Ã£o"})]})]}),m?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(n.RefreshCw,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-80 overflow-y-auto p-1",children:h.map(a=>(0,b.jsxs)("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition border ${k.includes(a.gameCode)?"bg-emerald-500/20 border-emerald-500/50":"bg-muted/30 border-transparent hover:bg-muted/50"}`,children:[(0,b.jsx)("input",{type:"checkbox",checked:k.includes(a.gameCode),onChange:()=>{var b;return b=a.gameCode,void(x?(A(!1),l([b])):l(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b]))},className:"w-4 h-4 rounded border-muted bg-background text-emerald-500 focus:ring-emerald-500 focus:ring-offset-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:a.gameName}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.provider," â€¢ RTP ",a.rtp,"%"]})]})]},a.gameCode))})]}),r&&(0,b.jsxs)("div",{className:"rounded-lg bg-red-500/20 border border-red-500/50 p-3 text-sm text-red-500 flex items-center gap-2",children:[(0,b.jsx)(u.AlertCircle,{className:"h-4 w-4"}),r]}),v&&(0,b.jsxs)("div",{className:"rounded-lg bg-emerald-500/20 border border-emerald-500/50 p-3 text-sm text-emerald-500 flex items-center gap-2",children:[(0,b.jsx)(t.Check,{className:"h-4 w-4"}),v]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:d,children:"Cancelar"}),(0,b.jsx)(f.Button,{onClick:C,disabled:p||!x&&0===k.length,children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):"Salvar AlteraÃ§Ãµes"})]})]})})}function F({label:a,value:d,className:e,icon:h}){let[i,j]=(0,c.useState)(!1);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"text-xs text-muted-foreground font-medium flex items-center gap-1",children:[h,a]}),(0,b.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,b.jsx)(g.Input,{readOnly:!0,value:d,className:`font-mono ${e||""}`}),(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:function(){navigator.clipboard.writeText(d),j(!0),setTimeout(()=>j(!1),2e3)},children:i?(0,b.jsx)(t.Check,{className:"h-4 w-4 text-emerald-500"}):(0,b.jsx)(s.Copy,{className:"h-4 w-4"})})]})]})}a.s(["default",()=>A],31773)}];

//# sourceMappingURL=src_app_agents_page_tsx_910fc9d7._.js.map