module.exports=[68339,a=>{"use strict";let b,c=(b=process.env.NEXT_PUBLIC_API_URL)?b.includes("/api/v1")?b:`${b}/api/v1`:"http://localhost:3006/api/v1",d=`${c}/agent`;a.s(["AGENT_API",0,d,"API_BASE",0,c])},11098,a=>{"use strict";var b=a.i(68339);let c=`${b.API_BASE}/pool`;function d(){return null}function e(){return{"Content-Type":"application/json"}}async function f(){let a=d();if(!a)return{success:!1,message:"Agente nÃ£o autenticado"};try{let b=await fetch(`${c}/${a}`,{headers:e()}),d=await b.json();return{success:!0,data:d.data||d}}catch(a){return console.error("[Pool API] Erro ao buscar pool:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function g(){let a=d();if(!a)return{success:!1,message:"Agente nÃ£o autenticado"};try{let b=await fetch(`${c}/${a}/limits`,{headers:e()}),d=await b.json();return{success:!0,data:d}}catch(a){return console.error("[Pool API] Erro ao buscar limites:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function h(a,b){let f=d();if(!f)return{success:!1,message:"Agente nÃ£o autenticado"};try{let d=await fetch(`${c}/${f}/deposit`,{method:"POST",headers:e(),body:JSON.stringify({amount:a,description:b})});return await d.json()}catch(a){return console.error("[Pool API] Erro ao depositar:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function i(a,b){let f=d();if(!f)return{success:!1,message:"Agente nÃ£o autenticado"};try{let d=await fetch(`${c}/${f}/withdraw`,{method:"POST",headers:e(),body:JSON.stringify({amount:a,description:b})});return await d.json()}catch(a){return console.error("[Pool API] Erro ao sacar:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function j(a){let b=d();if(!b)return{success:!1,message:"Agente nÃ£o autenticado"};try{let d=await fetch(`${c}/${b}/phase`,{method:"PUT",headers:e(),body:JSON.stringify({phase:a})});return await d.json()}catch(a){return console.error("[Pool API] Erro ao definir fase:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function k(a){let b=d();if(!b)return{success:!1,message:"Agente nÃ£o autenticado"};try{let d=await fetch(`${c}/${b}/config`,{method:"PUT",headers:e(),body:JSON.stringify(a)});return await d.json()}catch(a){return console.error("[Pool API] Erro ao atualizar config:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function l(a){let b=d();if(!b)return{success:!1,message:"Agente nÃ£o autenticado"};try{let d=new URLSearchParams;a?.type&&d.append("type",a.type),a?.startDate&&d.append("startDate",a.startDate),a?.endDate&&d.append("endDate",a.endDate),a?.limit&&d.append("limit",a.limit.toString()),a?.offset&&d.append("offset",a.offset.toString());let f=`${c}/${b}/transactions${d.toString()?"?"+d.toString():""}`,g=await fetch(f,{headers:e()}),h=await g.json(),i=h?.data?.transactions||h?.transactions||h?.data||[],j=h?.data?.pagination?.total||h?.total||0;return{success:!0,data:i,total:j}}catch(a){return console.error("[Pool API] Erro ao buscar transaÃ§Ãµes:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function m(a){let b=d();if(!b)return{success:!1,message:"Agente nÃ£o autenticado"};try{let d=`${c}/${b}/stats${a?"?period="+a:""}`,f=await fetch(d,{headers:e()}),g=await f.json();return{success:!0,data:g}}catch(a){return console.error("[Pool API] Erro ao buscar stats:",a),{success:!1,message:"Erro de conexÃ£o"}}}async function n(){let a=d();if(!a)return{success:!1,message:"Agente nÃ£o autenticado"};try{let b=await fetch(`${c}/${a}/reset-stats`,{method:"POST",headers:e()});return await b.json()}catch(a){return console.error("[Pool API] Erro ao resetar stats:",a),{success:!1,message:"Erro de conexÃ£o"}}}function o(a){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)}function p(a){return`${a.toFixed(1)}%`}function q(a){switch(a){case"retention":return"ðŸ”’ RetenÃ§Ã£o";case"normal":return"âš–ï¸ Normal";case"release":return"ðŸ’° LiberaÃ§Ã£o";default:return a}}function r(a){switch(a){case"retention":return"Jogadores ganham menos, pool acumula saldo";case"normal":return"EquilÃ­brio entre ganhos e retenÃ§Ã£o";case"release":return"Jogadores ganham mais, pool distribui lucros";default:return""}}a.s(["depositToPool",()=>h,"fetchPool",()=>f,"fetchPoolLimits",()=>g,"fetchPoolStats",()=>m,"fetchPoolTransactions",()=>l,"formatCurrency",()=>o,"formatPercent",()=>p,"getPhaseDescription",()=>r,"getPhaseLabel",()=>q,"resetPoolStats",()=>n,"setPoolPhase",()=>j,"updatePoolConfig",()=>k,"withdrawFromPool",()=>i])},97403,a=>{"use strict";var b=a.i(87359),c=a.i(62503),d=a.i(61271),e=a.i(86238),f=a.i(11098);function g(){let a=(0,d.useRouter)(),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("all"),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(0),[A,B]=(0,c.useState)(!0),C=(0,c.useCallback)(async(a=!1)=>{try{let b=a?0:y,c={limit:50,offset:b};"all"!==s&&(c.type=s),u&&(c.startDate=u),w&&(c.endDate=w);let d=await (0,f.fetchPoolTransactions)(c);if(d.success&&d.data){let c=Array.isArray(d.data)?d.data:[];a?l(c):l(a=>[...a,...c]),B(50===c.length),a?z(50):z(b+50)}else a&&l([])}catch(a){r("Erro ao carregar transaÃ§Ãµes"),console.error(a)}},[s,u,w,y]);async function D(){p(!0),await C(!1),p(!1)}return((0,c.useEffect)(()=>{let b=localStorage.getItem("agentToken"),c=localStorage.getItem("agentData");b&&c?(h(JSON.parse(c)),(async()=>{try{let a=await (0,f.fetchPool)();a.success&&a.data&&j(a.data);let b=await (0,f.fetchPoolTransactions)({limit:50,offset:0});if(b.success&&b.data){let a=Array.isArray(b.data)?b.data:[];l(a),B(50===a.length),z(50)}else l([])}catch(a){r("Erro ao carregar dados"),console.error(a),l([])}finally{n(!1)}})()):a.push("/")},[a]),(0,c.useEffect)(()=>{!m&&g&&(z(0),C(!0))},[s,u,w]),m)?(0,b.jsx)("div",{className:"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-emerald-500 border-t-transparent"})}):(0,b.jsxs)("div",{className:"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900",children:[(0,b.jsx)("header",{className:"border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm sticky top-0 z-40",children:(0,b.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-linear-to-br from-emerald-500 to-blue-600 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-xl",children:"ðŸŽ°"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-bold text-white",children:g?.name}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:g?.email})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-slate-700/50 rounded-xl px-6 py-3 border border-slate-600",children:[(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ¦"}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"Saldo do Pool"}),(0,b.jsx)("p",{className:`text-2xl font-bold ${(i?.balance||0)>0?"text-emerald-400":"text-red-400"}`,children:(0,f.formatCurrency)(i?.balance||0)})]})]}),(0,b.jsxs)("button",{onClick:function(){localStorage.removeItem("agentToken"),localStorage.removeItem("agentData"),a.push("/")},className:"flex items-center gap-2 rounded-lg bg-slate-700 hover:bg-red-600/20 hover:text-red-400 border border-slate-600 hover:border-red-500/50 px-4 py-2 text-sm text-slate-300 transition",children:[(0,b.jsx)("span",{children:"ðŸšª"}),"Sair"]})]})})}),(0,b.jsx)("nav",{className:"border-b border-slate-700/50 bg-slate-800/30",children:(0,b.jsx)("div",{className:"mx-auto max-w-6xl px-6",children:(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(e.default,{href:"/dashboard",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸ“Š Dashboard"}),(0,b.jsx)(e.default,{href:"/dashboard/pool",className:"px-4 py-3 text-sm font-medium text-emerald-400 border-b-2 border-emerald-400",children:"ðŸ¦ Pool"}),(0,b.jsx)(e.default,{href:"/dashboard/games",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸŽ® Jogos"}),(0,b.jsx)(e.default,{href:"/dashboard/transactions",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸ“‹ TransaÃ§Ãµes"}),(0,b.jsx)(e.default,{href:"/dashboard/integration",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸ”— IntegraÃ§Ã£o"}),(0,b.jsx)(e.default,{href:"/dashboard/settings",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"âš™ï¸ ConfiguraÃ§Ãµes"})]})})}),(0,b.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(e.default,{href:"/dashboard/pool",className:"text-slate-400 hover:text-white transition",children:"ðŸ¦ Pool"}),(0,b.jsx)("span",{className:"text-slate-600",children:"/"}),(0,b.jsx)("span",{className:"text-white",children:"HistÃ³rico de TransaÃ§Ãµes"})]})}),(0,b.jsxs)("main",{className:"mx-auto max-w-6xl px-6 pb-8",children:[q&&(0,b.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-red-500/20 border border-red-500/50 text-red-300",children:q}),(0,b.jsx)("div",{className:"rounded-xl border border-slate-700 bg-slate-800/50 p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"Tipo:"}),(0,b.jsxs)("select",{value:s,onChange:a=>t(a.target.value),className:"px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-emerald-500",children:[(0,b.jsx)("option",{value:"all",children:"Todos"}),(0,b.jsx)("option",{value:"bet",children:"Apostas"}),(0,b.jsx)("option",{value:"payout",children:"Pagamentos"}),(0,b.jsx)("option",{value:"deposit",children:"DepÃ³sitos"}),(0,b.jsx)("option",{value:"withdraw",children:"Saques"}),(0,b.jsx)("option",{value:"adjustment",children:"Ajustes"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"De:"}),(0,b.jsx)("input",{type:"date",value:u,onChange:a=>v(a.target.value),className:"px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-emerald-500"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-slate-400",children:"AtÃ©:"}),(0,b.jsx)("input",{type:"date",value:w,onChange:a=>x(a.target.value),className:"px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-emerald-500"})]}),("all"!==s||u||w)&&(0,b.jsx)("button",{onClick:()=>{t("all"),v(""),x("")},className:"text-sm text-slate-400 hover:text-white transition",children:"âœ• Limpar filtros"})]})}),(0,b.jsxs)("div",{className:"rounded-xl border border-slate-700 bg-slate-800/50 overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-slate-700",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"ðŸ“‹ TransaÃ§Ãµes do Pool"})}),0===k.length?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("span",{className:"text-4xl mb-4 block",children:"ðŸ“­"}),(0,b.jsx)("p",{className:"text-slate-400",children:"Nenhuma transaÃ§Ã£o encontrada"}),("all"!==s||u||w)&&(0,b.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Tente ajustar os filtros"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-slate-700/30",children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Data/Hora"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Tipo"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Valor"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Saldo Antes"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Saldo ApÃ³s"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Detalhes"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:(Array.isArray(k)?k:[]).map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-700/20 transition",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-slate-300 whitespace-nowrap",children:new Date(a.createdAt).toLocaleString("pt-BR")}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${function(a){switch(a){case"bet":return"bg-blue-500/20 text-blue-400";case"payout":return"bg-red-500/20 text-red-400";case"deposit":return"bg-emerald-500/20 text-emerald-400";case"withdraw":return"bg-orange-500/20 text-orange-400";case"adjustment":return"bg-purple-500/20 text-purple-400";default:return"bg-slate-500/20 text-slate-400"}}(a.type)}`,children:[function(a){switch(a){case"bet":return"ðŸŽ°";case"payout":return"ðŸ’µ";case"deposit":return"ðŸ“¥";case"withdraw":return"ðŸ“¤";case"adjustment":return"ðŸ”§";default:return"ðŸ“‹"}}(a.type)," ",function(a){switch(a){case"bet":return"Aposta";case"payout":return"Pagamento";case"deposit":return"DepÃ³sito";case"withdraw":return"Saque";case"adjustment":return"Ajuste";default:return a}}(a.type)]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsxs)("span",{className:`font-semibold ${"bet"===a.type||"deposit"===a.type?"text-emerald-400":"text-red-400"}`,children:["bet"===a.type||"deposit"===a.type?"+":"-"," ",(0,f.formatCurrency)(Math.abs(a.amount))]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right text-sm text-slate-400",children:(0,f.formatCurrency)(a.balanceBefore)}),(0,b.jsx)("td",{className:"px-6 py-4 text-right text-sm text-slate-300 font-medium",children:(0,f.formatCurrency)(a.balanceAfter)}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-slate-400 max-w-xs truncate",children:[a.note&&(0,b.jsx)("span",{className:"block",children:a.note}),a.gameCode&&(0,b.jsxs)("span",{className:"text-xs text-slate-500",children:["Jogo: ",a.gameCode]}),a.playerId&&(0,b.jsxs)("span",{className:"text-xs text-slate-500 block",children:["Player: ",a.playerId.substring(0,8),"..."]})]})]},a.id))})]})}),A&&(0,b.jsx)("div",{className:"p-4 border-t border-slate-700 text-center",children:(0,b.jsx)("button",{onClick:D,disabled:o,className:"px-6 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-white font-medium transition disabled:opacity-50",children:o?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Carregando..."]}):"Carregar mais"})})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4 mt-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-blue-500/30 bg-blue-500/10 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-blue-300",children:"Apostas"}),(0,b.jsx)("p",{className:"text-xl font-bold text-blue-400",children:(Array.isArray(k)?k:[]).filter(a=>"bet"===a.type).length})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-red-300",children:"Pagamentos"}),(0,b.jsx)("p",{className:"text-xl font-bold text-red-400",children:(Array.isArray(k)?k:[]).filter(a=>"payout"===a.type).length})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-emerald-300",children:"DepÃ³sitos"}),(0,b.jsx)("p",{className:"text-xl font-bold text-emerald-400",children:(Array.isArray(k)?k:[]).filter(a=>"deposit"===a.type).length})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-orange-500/30 bg-orange-500/10 p-4 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-orange-300",children:"Saques"}),(0,b.jsx)("p",{className:"text-xl font-bold text-orange-400",children:(Array.isArray(k)?k:[]).filter(a=>"withdraw"===a.type).length})]})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=agent-panel_src_da7179b1._.js.map