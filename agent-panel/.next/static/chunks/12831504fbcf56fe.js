(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14236,e=>{"use strict";let t,s="localhost"!==(t=window.location.hostname)&&"127.0.0.1"!==t?"https://api.ultraself.space/api/v1":"http://localhost:3006/api/v1",a=`${s}/agent`;console.log("[Config] API_BASE:",s),console.log("[Config] Hostname:",window.location.hostname),e.s(["AGENT_API",0,a,"API_BASE",0,s])},40219,e=>{"use strict";var t=e.i(14236);let s=`${t.API_BASE}/pool`;function a(){let e=localStorage.getItem("agentData");return e?JSON.parse(e).id:null}function r(){let e=localStorage.getItem("agentToken");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}}async function o(){let e=a();if(!e)return{success:!1,message:"Agente nÃ£o autenticado"};try{let t=await fetch(`${s}/${e}`,{headers:r()}),a=await t.json();return{success:!0,data:a.data||a}}catch(e){return console.error("[Pool API] Erro ao buscar pool:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function n(){let e=a();if(!e)return{success:!1,message:"Agente nÃ£o autenticado"};try{let t=await fetch(`${s}/${e}/limits`,{headers:r()}),a=await t.json();return{success:!0,data:a}}catch(e){return console.error("[Pool API] Erro ao buscar limites:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function l(e,t){let o=a();if(!o)return{success:!1,message:"Agente nÃ£o autenticado"};try{let a=await fetch(`${s}/${o}/deposit`,{method:"POST",headers:r(),body:JSON.stringify({amount:e,description:t})});return await a.json()}catch(e){return console.error("[Pool API] Erro ao depositar:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function c(e,t){let o=a();if(!o)return{success:!1,message:"Agente nÃ£o autenticado"};try{let a=await fetch(`${s}/${o}/withdraw`,{method:"POST",headers:r(),body:JSON.stringify({amount:e,description:t})});return await a.json()}catch(e){return console.error("[Pool API] Erro ao sacar:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function i(e){let t=a();if(!t)return{success:!1,message:"Agente nÃ£o autenticado"};try{let a=await fetch(`${s}/${t}/phase`,{method:"PUT",headers:r(),body:JSON.stringify({phase:e})});return await a.json()}catch(e){return console.error("[Pool API] Erro ao definir fase:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function d(e){let t=a();if(!t)return{success:!1,message:"Agente nÃ£o autenticado"};try{let a=await fetch(`${s}/${t}/config`,{method:"PUT",headers:r(),body:JSON.stringify(e)});return await a.json()}catch(e){return console.error("[Pool API] Erro ao atualizar config:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function x(e){let t=a();if(!t)return{success:!1,message:"Agente nÃ£o autenticado"};try{let a=new URLSearchParams;e?.type&&a.append("type",e.type),e?.startDate&&a.append("startDate",e.startDate),e?.endDate&&a.append("endDate",e.endDate),e?.limit&&a.append("limit",e.limit.toString()),e?.offset&&a.append("offset",e.offset.toString());let o=`${s}/${t}/transactions${a.toString()?"?"+a.toString():""}`,n=await fetch(o,{headers:r()}),l=await n.json(),c=l?.data?.transactions||l?.transactions||l?.data||[],i=l?.data?.pagination?.total||l?.total||0;return{success:!0,data:c,total:i}}catch(e){return console.error("[Pool API] Erro ao buscar transaÃ§Ãµes:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function u(e){let t=a();if(!t)return{success:!1,message:"Agente nÃ£o autenticado"};try{let a=`${s}/${t}/stats${e?"?period="+e:""}`,o=await fetch(a,{headers:r()}),n=await o.json();return{success:!0,data:n}}catch(e){return console.error("[Pool API] Erro ao buscar stats:",e),{success:!1,message:"Erro de conexÃ£o"}}}async function m(){let e=a();if(!e)return{success:!1,message:"Agente nÃ£o autenticado"};try{let t=await fetch(`${s}/${e}/reset-stats`,{method:"POST",headers:r()});return await t.json()}catch(e){return console.error("[Pool API] Erro ao resetar stats:",e),{success:!1,message:"Erro de conexÃ£o"}}}function h(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function p(e){return`${e.toFixed(1)}%`}function f(e){switch(e){case"retention":return"ðŸ”’ RetenÃ§Ã£o";case"normal":return"âš–ï¸ Normal";case"release":return"ðŸ’° LiberaÃ§Ã£o";default:return e}}function b(e){switch(e){case"retention":return"Jogadores ganham menos, pool acumula saldo";case"normal":return"EquilÃ­brio entre ganhos e retenÃ§Ã£o";case"release":return"Jogadores ganham mais, pool distribui lucros";default:return""}}e.s(["depositToPool",()=>l,"fetchPool",()=>o,"fetchPoolLimits",()=>n,"fetchPoolStats",()=>u,"fetchPoolTransactions",()=>x,"formatCurrency",()=>h,"formatPercent",()=>p,"getPhaseDescription",()=>b,"getPhaseLabel",()=>f,"resetPoolStats",()=>m,"setPoolPhase",()=>i,"updatePoolConfig",()=>d,"withdrawFromPool",()=>c])},30601,e=>{"use strict";var t=e.i(36393),s=e.i(75464),a=e.i(66025),r=e.i(36134),o=e.i(40219);function n(){let e=(0,a.useRouter)(),[n,l]=(0,s.useState)(null),[c,i]=(0,s.useState)(null),[d,x]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),[f,b]=(0,s.useState)(""),[g,j]=(0,s.useState)("all"),[y,N]=(0,s.useState)(""),[w,v]=(0,s.useState)(""),[P,A]=(0,s.useState)(0),[S,E]=(0,s.useState)(!0),$=(0,s.useCallback)(async(e=!1)=>{try{let t=e?0:P,s={limit:50,offset:t};"all"!==g&&(s.type=g),y&&(s.startDate=y),w&&(s.endDate=w);let a=await (0,o.fetchPoolTransactions)(s);if(a.success&&a.data){let s=Array.isArray(a.data)?a.data:[];e?x(s):x(e=>[...e,...s]),E(50===s.length),e?A(50):A(t+50)}else e&&x([])}catch(e){b("Erro ao carregar transaÃ§Ãµes"),console.error(e)}},[g,y,w,P]);async function T(){p(!0),await $(!1),p(!1)}return((0,s.useEffect)(()=>{let t=localStorage.getItem("agentToken"),s=localStorage.getItem("agentData");t&&s?(l(JSON.parse(s)),(async()=>{try{let e=await (0,o.fetchPool)();e.success&&e.data&&i(e.data);let t=await (0,o.fetchPoolTransactions)({limit:50,offset:0});if(t.success&&t.data){let e=Array.isArray(t.data)?t.data:[];x(e),E(50===e.length),A(50)}else x([])}catch(e){b("Erro ao carregar dados"),console.error(e),x([])}finally{m(!1)}})()):e.push("/")},[e]),(0,s.useEffect)(()=>{!u&&n&&(A(0),$(!0))},[g,y,w]),u)?(0,t.jsx)("div",{className:"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-emerald-500 border-t-transparent"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900",children:[(0,t.jsx)("header",{className:"border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm sticky top-0 z-40",children:(0,t.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-linear-to-br from-emerald-500 to-blue-600 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xl",children:"ðŸŽ°"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-white",children:n?.name}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:n?.email})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-slate-700/50 rounded-xl px-6 py-3 border border-slate-600",children:[(0,t.jsx)("span",{className:"text-2xl",children:"ðŸ¦"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Saldo do Pool"}),(0,t.jsx)("p",{className:`text-2xl font-bold ${(c?.balance||0)>0?"text-emerald-400":"text-red-400"}`,children:(0,o.formatCurrency)(c?.balance||0)})]})]}),(0,t.jsxs)("button",{onClick:function(){localStorage.removeItem("agentToken"),localStorage.removeItem("agentData"),e.push("/")},className:"flex items-center gap-2 rounded-lg bg-slate-700 hover:bg-red-600/20 hover:text-red-400 border border-slate-600 hover:border-red-500/50 px-4 py-2 text-sm text-slate-300 transition",children:[(0,t.jsx)("span",{children:"ðŸšª"}),"Sair"]})]})})}),(0,t.jsx)("nav",{className:"border-b border-slate-700/50 bg-slate-800/30",children:(0,t.jsx)("div",{className:"mx-auto max-w-6xl px-6",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(r.default,{href:"/dashboard",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸ“Š Dashboard"}),(0,t.jsx)(r.default,{href:"/dashboard/pool",className:"px-4 py-3 text-sm font-medium text-emerald-400 border-b-2 border-emerald-400",children:"ðŸ¦ Pool"}),(0,t.jsx)(r.default,{href:"/dashboard/games",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸŽ® Jogos"}),(0,t.jsx)(r.default,{href:"/dashboard/transactions",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸ“‹ TransaÃ§Ãµes"}),(0,t.jsx)(r.default,{href:"/dashboard/integration",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"ðŸ”— IntegraÃ§Ã£o"}),(0,t.jsx)(r.default,{href:"/dashboard/settings",className:"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition",children:"âš™ï¸ ConfiguraÃ§Ãµes"})]})})}),(0,t.jsx)("div",{className:"mx-auto max-w-6xl px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(r.default,{href:"/dashboard/pool",className:"text-slate-400 hover:text-white transition",children:"ðŸ¦ Pool"}),(0,t.jsx)("span",{className:"text-slate-600",children:"/"}),(0,t.jsx)("span",{className:"text-white",children:"HistÃ³rico de TransaÃ§Ãµes"})]})}),(0,t.jsxs)("main",{className:"mx-auto max-w-6xl px-6 pb-8",children:[f&&(0,t.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-red-500/20 border border-red-500/50 text-red-300",children:f}),(0,t.jsx)("div",{className:"rounded-xl border border-slate-700 bg-slate-800/50 p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"Tipo:"}),(0,t.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-emerald-500",children:[(0,t.jsx)("option",{value:"all",children:"Todos"}),(0,t.jsx)("option",{value:"bet",children:"Apostas"}),(0,t.jsx)("option",{value:"payout",children:"Pagamentos"}),(0,t.jsx)("option",{value:"deposit",children:"DepÃ³sitos"}),(0,t.jsx)("option",{value:"withdraw",children:"Saques"}),(0,t.jsx)("option",{value:"adjustment",children:"Ajustes"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"De:"}),(0,t.jsx)("input",{type:"date",value:y,onChange:e=>N(e.target.value),className:"px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-emerald-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-slate-400",children:"AtÃ©:"}),(0,t.jsx)("input",{type:"date",value:w,onChange:e=>v(e.target.value),className:"px-3 py-2 rounded-lg bg-slate-700 border border-slate-600 text-white text-sm focus:outline-none focus:border-emerald-500"})]}),("all"!==g||y||w)&&(0,t.jsx)("button",{onClick:()=>{j("all"),N(""),v("")},className:"text-sm text-slate-400 hover:text-white transition",children:"âœ• Limpar filtros"})]})}),(0,t.jsxs)("div",{className:"rounded-xl border border-slate-700 bg-slate-800/50 overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-slate-700",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"ðŸ“‹ TransaÃ§Ãµes do Pool"})}),0===d.length?(0,t.jsxs)("div",{className:"p-12 text-center",children:[(0,t.jsx)("span",{className:"text-4xl mb-4 block",children:"ðŸ“­"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Nenhuma transaÃ§Ã£o encontrada"}),("all"!==g||y||w)&&(0,t.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:"Tente ajustar os filtros"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-slate-700/30",children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Data/Hora"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Tipo"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Valor"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Saldo Antes"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase",children:"Saldo ApÃ³s"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase",children:"Detalhes"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/50",children:(Array.isArray(d)?d:[]).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-slate-700/20 transition",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-slate-300 whitespace-nowrap",children:new Date(e.createdAt).toLocaleString("pt-BR")}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${function(e){switch(e){case"bet":return"bg-blue-500/20 text-blue-400";case"payout":return"bg-red-500/20 text-red-400";case"deposit":return"bg-emerald-500/20 text-emerald-400";case"withdraw":return"bg-orange-500/20 text-orange-400";case"adjustment":return"bg-purple-500/20 text-purple-400";default:return"bg-slate-500/20 text-slate-400"}}(e.type)}`,children:[function(e){switch(e){case"bet":return"ðŸŽ°";case"payout":return"ðŸ’µ";case"deposit":return"ðŸ“¥";case"withdraw":return"ðŸ“¤";case"adjustment":return"ðŸ”§";default:return"ðŸ“‹"}}(e.type)," ",function(e){switch(e){case"bet":return"Aposta";case"payout":return"Pagamento";case"deposit":return"DepÃ³sito";case"withdraw":return"Saque";case"adjustment":return"Ajuste";default:return e}}(e.type)]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("span",{className:`font-semibold ${"bet"===e.type||"deposit"===e.type?"text-emerald-400":"text-red-400"}`,children:["bet"===e.type||"deposit"===e.type?"+":"-"," ",(0,o.formatCurrency)(Math.abs(e.amount))]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right text-sm text-slate-400",children:(0,o.formatCurrency)(e.balanceBefore)}),(0,t.jsx)("td",{className:"px-6 py-4 text-right text-sm text-slate-300 font-medium",children:(0,o.formatCurrency)(e.balanceAfter)}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-slate-400 max-w-xs truncate",children:[e.note&&(0,t.jsx)("span",{className:"block",children:e.note}),e.gameCode&&(0,t.jsxs)("span",{className:"text-xs text-slate-500",children:["Jogo: ",e.gameCode]}),e.playerId&&(0,t.jsxs)("span",{className:"text-xs text-slate-500 block",children:["Player: ",e.playerId.substring(0,8),"..."]})]})]},e.id))})]})}),S&&(0,t.jsx)("div",{className:"p-4 border-t border-slate-700 text-center",children:(0,t.jsx)("button",{onClick:T,disabled:h,className:"px-6 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-white font-medium transition disabled:opacity-50",children:h?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Carregando..."]}):"Carregar mais"})})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-4 mt-6",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-blue-500/30 bg-blue-500/10 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-blue-300",children:"Apostas"}),(0,t.jsx)("p",{className:"text-xl font-bold text-blue-400",children:(Array.isArray(d)?d:[]).filter(e=>"bet"===e.type).length})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-red-300",children:"Pagamentos"}),(0,t.jsx)("p",{className:"text-xl font-bold text-red-400",children:(Array.isArray(d)?d:[]).filter(e=>"payout"===e.type).length})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-emerald-300",children:"DepÃ³sitos"}),(0,t.jsx)("p",{className:"text-xl font-bold text-emerald-400",children:(Array.isArray(d)?d:[]).filter(e=>"deposit"===e.type).length})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-orange-500/30 bg-orange-500/10 p-4 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-orange-300",children:"Saques"}),(0,t.jsx)("p",{className:"text-xl font-bold text-orange-400",children:(Array.isArray(d)?d:[]).filter(e=>"withdraw"===e.type).length})]})]})]})]})}e.s(["default",()=>n])}]);