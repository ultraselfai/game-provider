{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Z:/dev/Templates/Cassino/game-provider/agent-panel/src/app/dashboard/games/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\n\r\nconst API_BASE = 'http://localhost:3006/api/v1';\r\n\r\ninterface Agent {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  balance: number;\r\n}\r\n\r\ninterface Game {\r\n  id: string;\r\n  gameCode: string;\r\n  gameName: string;\r\n  provider: string;\r\n  category: string;\r\n  rtp: number;\r\n  volatility: string;\r\n  isActive: boolean;\r\n  thumbnail?: string;\r\n}\r\n\r\n// Icons para cada jogo\r\nconst gameIcons: Record<string, string> = {\r\n  'fortunetiger': 'üêØ',\r\n  'fortuneox': 'üêÇ',\r\n  'fortunerabbit': 'üê∞',\r\n  'fortunedragon': 'üê≤',\r\n  'fortunemouse': 'üê≠',\r\n  'fortunepanda': 'üêº',\r\n  'bikiniparadise': 'üëô',\r\n  'hoodvswoolf': 'üê∫',\r\n  'jackfrost': '‚ùÑÔ∏è',\r\n  'phoenixrises': 'üî•',\r\n  'queenofbounty': 'üëë',\r\n  'songkranparty': 'üí¶',\r\n  'treasuresofaztec': 'üèõÔ∏è',\r\n};\r\n\r\nexport default function GamesPage() {\r\n  const router = useRouter();\r\n  const [agent, setAgent] = useState<Agent | null>(null);\r\n  const [games, setGames] = useState<Game[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('agentToken');\r\n    const agentData = localStorage.getItem('agentData');\r\n\r\n    if (!token || !agentData) {\r\n      router.push('/');\r\n      return;\r\n    }\r\n\r\n    setAgent(JSON.parse(agentData));\r\n    fetchGames(token);\r\n  }, [router]);\r\n\r\n  async function fetchGames(token: string) {\r\n    try {\r\n      const res = await fetch(`${API_BASE}/agent/games`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setGames(data.data || []);\r\n      } else {\r\n        // Fallback: buscar do admin endpoint se o agent endpoint n√£o existir\r\n        const adminRes = await fetch(`${API_BASE}/admin/games`);\r\n        const adminData = await adminRes.json();\r\n        setGames(Array.isArray(adminData) ? adminData : []);\r\n      }\r\n    } catch (err) {\r\n      console.error('Erro ao carregar jogos:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function handleLogout() {\r\n    localStorage.removeItem('agentToken');\r\n    localStorage.removeItem('agentData');\r\n    router.push('/');\r\n  }\r\n\r\n  const filteredGames = games.filter(game =>\r\n    game.gameName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    game.gameCode.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const getGameIcon = (code: string) => gameIcons[code] || 'üé∞';\r\n\r\n  const volatilityLabels: Record<string, { text: string; color: string }> = {\r\n    low: { text: 'Baixa', color: 'text-emerald-400 bg-emerald-500/20' },\r\n    medium: { text: 'M√©dia', color: 'text-amber-400 bg-amber-500/20' },\r\n    high: { text: 'Alta', color: 'text-red-400 bg-red-500/20' },\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center\">\r\n        <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-emerald-500 border-t-transparent\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900\">\r\n      {/* Header com Saldo */}\r\n      <header className=\"border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm sticky top-0 z-40\">\r\n        <div className=\"mx-auto max-w-6xl px-6 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-emerald-500 to-blue-600 flex items-center justify-center\">\r\n                <span className=\"text-xl\">üé∞</span>\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-lg font-bold text-white\">{agent?.name}</h1>\r\n                <p className=\"text-xs text-slate-400\">{agent?.email}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 bg-slate-700/50 rounded-xl px-6 py-3 border border-slate-600\">\r\n              <span className=\"text-2xl\">üí∞</span>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-xs text-slate-400\">Saldo Dispon√≠vel</p>\r\n                <p className={`text-2xl font-bold ${Number(agent?.balance) > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                  R$ {Number(agent?.balance || 0).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"flex items-center gap-2 rounded-lg bg-slate-700 hover:bg-red-600/20 hover:text-red-400 border border-slate-600 hover:border-red-500/50 px-4 py-2 text-sm text-slate-300 transition\"\r\n            >\r\n              <span>üö™</span>\r\n              Sair\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"border-b border-slate-700/50 bg-slate-800/30\">\r\n        <div className=\"mx-auto max-w-6xl px-6\">\r\n          <div className=\"flex gap-1\">\r\n            <Link\r\n              href=\"/dashboard\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üìä Dashboard\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/games\"\r\n              className=\"px-4 py-3 text-sm font-medium text-emerald-400 border-b-2 border-emerald-400\"\r\n            >\r\n              üéÆ Jogos\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/integration\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üîó Integra√ß√£o\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"mx-auto max-w-6xl px-6 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-semibold text-white\">Jogos Dispon√≠veis</h2>\r\n            <p className=\"text-slate-400 text-sm mt-1\">\r\n              {filteredGames.filter(g => g.isActive).length} jogos ativos dispon√≠veis para sua bet\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Buscar jogos...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"rounded-lg bg-slate-800 border border-slate-600 pl-10 pr-4 py-2 text-sm text-white placeholder-slate-500 focus:border-emerald-500 focus:outline-none w-64\"\r\n            />\r\n            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500\">üîç</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Games Grid */}\r\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\r\n          {filteredGames.map((game) => {\r\n            const volInfo = volatilityLabels[game.volatility] || volatilityLabels.medium;\r\n            \r\n            return (\r\n              <div\r\n                key={game.id}\r\n                className={`rounded-xl border bg-slate-800/50 p-5 transition hover:border-emerald-500/50 ${\r\n                  game.isActive ? 'border-slate-700' : 'border-red-500/30 opacity-60'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start gap-4\">\r\n                  <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-600/30 to-blue-600/30 flex items-center justify-center text-3xl\">\r\n                    {getGameIcon(game.gameCode)}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-white\">{game.gameName}</h3>\r\n                        <p className=\"text-xs text-slate-400\">{game.provider || 'PGSoft'}</p>\r\n                      </div>\r\n                      <span className={`px-2 py-0.5 rounded-full text-xs font-medium ${\r\n                        game.isActive\r\n                          ? 'bg-emerald-500/20 text-emerald-400'\r\n                          : 'bg-red-500/20 text-red-400'\r\n                      }`}>\r\n                        {game.isActive ? '‚óè Ativo' : '‚óè Inativo'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4 pt-4 border-t border-slate-700 grid grid-cols-3 gap-2 text-center\">\r\n                  <div>\r\n                    <p className=\"text-xs text-slate-500\">RTP</p>\r\n                    <p className=\"text-sm font-semibold text-blue-400\">{Number(game.rtp).toFixed(1)}%</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-slate-500\">Volatilidade</p>\r\n                    <p className={`text-sm font-semibold ${volInfo.color.split(' ')[0]}`}>\r\n                      {volInfo.text}\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-slate-500\">C√≥digo</p>\r\n                    <code className=\"text-xs text-emerald-400\">{game.gameCode}</code>\r\n                  </div>\r\n                </div>\r\n\r\n                {game.isActive && (\r\n                  <div className=\"mt-4\">\r\n                    <div className=\"flex items-center gap-2 text-xs text-emerald-400 bg-emerald-500/10 rounded-lg p-2\">\r\n                      <span>‚úì</span>\r\n                      <span>Dispon√≠vel para integra√ß√£o</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {filteredGames.length === 0 && (\r\n          <div className=\"text-center py-12\">\r\n            <span className=\"text-4xl mb-4 block\">üéÆ</span>\r\n            <p className=\"text-slate-400\">Nenhum jogo encontrado</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Info */}\r\n        <div className=\"mt-8 rounded-xl border border-amber-500/30 bg-amber-500/10 p-5\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <span className=\"text-2xl\">üí°</span>\r\n            <div>\r\n              <h3 className=\"font-medium text-amber-300\">Como integrar os jogos?</h3>\r\n              <p className=\"text-sm text-amber-200/70 mt-1\">\r\n                Acesse a aba <strong>Integra√ß√£o</strong> para obter suas credenciais de API e instru√ß√µes \r\n                de como conectar estes jogos na sua plataforma bet.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}