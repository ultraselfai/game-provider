{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Z:/dev/Templates/Cassino/game-provider/agent-panel/src/lib/config.ts"],"sourcesContent":["// API Configuration - centralizado para facilitar manuten√ß√£o\r\n// IMPORTANT: NEXT_PUBLIC_* vars are embedded at BUILD TIME, not runtime\r\n\r\n// Detectar ambiente baseado no hostname do browser\r\nfunction getApiBase(): string {\r\n  // Se estiver no servidor (SSR), usar vari√°vel de ambiente ou fallback\r\n  if (typeof window === 'undefined') {\r\n    const envUrl = process.env.NEXT_PUBLIC_API_URL;\r\n    if (envUrl) {\r\n      // Se a URL j√° tem /api/v1, usar diretamente, sen√£o adicionar\r\n      return envUrl.includes('/api/v1') ? envUrl : `${envUrl}/api/v1`;\r\n    }\r\n    return 'http://localhost:3006/api/v1';\r\n  }\r\n  \r\n  // No browser, detectar automaticamente baseado no hostname\r\n  const hostname = window.location.hostname;\r\n  \r\n  // Se estiver em produ√ß√£o (n√£o localhost)\r\n  if (hostname !== 'localhost' && hostname !== '127.0.0.1') {\r\n    return 'https://api.ultraself.space/api/v1';\r\n  }\r\n  \r\n  // Desenvolvimento local\r\n  return 'http://localhost:3006/api/v1';\r\n}\r\n\r\nexport const API_BASE = getApiBase();\r\nexport const AGENT_API = `${API_BASE}/agent`;\r\nexport const ADMIN_API = `${API_BASE}/admin`;\r\n\r\n// Debug log (only in browser)\r\nif (typeof window !== 'undefined') {\r\n  console.log('[Config] API_BASE:', API_BASE);\r\n  console.log('[Config] Hostname:', window.location.hostname);\r\n}\r\n"],"names":[],"mappings":"AAAA,6DAA6D;AAC7D,wEAAwE;AAExE,mDAAmD;;;;;;;;;AACnD,SAAS;IACP,sEAAsE;IACtE;;IASA,2DAA2D;IAC3D,MAAM,WAAW,OAAO,QAAQ,CAAC,QAAQ;IAEzC,yCAAyC;IACzC,IAAI,aAAa,eAAe,aAAa,aAAa;QACxD,OAAO;IACT;IAEA,wBAAwB;IACxB,OAAO;AACT;AAEO,MAAM,WAAW;AACjB,MAAM,YAAY,GAAG,SAAS,MAAM,CAAC;AACrC,MAAM,YAAY,GAAG,SAAS,MAAM,CAAC;AAE5C,8BAA8B;AAC9B,wCAAmC;IACjC,QAAQ,GAAG,CAAC,sBAAsB;IAClC,QAAQ,GAAG,CAAC,sBAAsB,OAAO,QAAQ,CAAC,QAAQ;AAC5D"}},
    {"offset": {"line": 43, "column": 0}, "map": {"version":3,"sources":["file:///Z:/dev/Templates/Cassino/game-provider/agent-panel/src/app/dashboard/settings/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { AGENT_API } from '@/lib/config';\r\n\r\ninterface Agent {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  spinCredits: number;\r\n}\r\n\r\nexport default function SettingsPage() {\r\n  const router = useRouter();\r\n  const [agent, setAgent] = useState<Agent | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // Password change state\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [passwordLoading, setPasswordLoading] = useState(false);\r\n  const [passwordError, setPasswordError] = useState('');\r\n  const [passwordSuccess, setPasswordSuccess] = useState('');\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('agentToken');\r\n    const agentData = localStorage.getItem('agentData');\r\n\r\n    if (!token || !agentData) {\r\n      router.push('/');\r\n      return;\r\n    }\r\n\r\n    setAgent(JSON.parse(agentData));\r\n    setLoading(false);\r\n  }, [router]);\r\n\r\n  async function handleChangePassword(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setPasswordError('');\r\n    setPasswordSuccess('');\r\n\r\n    if (newPassword.length < 6) {\r\n      setPasswordError('Nova senha deve ter pelo menos 6 caracteres');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setPasswordError('As senhas n√£o conferem');\r\n      return;\r\n    }\r\n\r\n    setPasswordLoading(true);\r\n\r\n    try {\r\n      const token = localStorage.getItem('agentToken');\r\n      const res = await fetch(`${AGENT_API}/password`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({\r\n          currentPassword,\r\n          newPassword,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setPasswordSuccess('Senha alterada com sucesso!');\r\n        setCurrentPassword('');\r\n        setNewPassword('');\r\n        setConfirmPassword('');\r\n      } else {\r\n        setPasswordError(data.message || 'Erro ao alterar senha');\r\n      }\r\n    } catch (err) {\r\n      setPasswordError('Erro de conex√£o');\r\n    } finally {\r\n      setPasswordLoading(false);\r\n    }\r\n  }\r\n\r\n  function handleLogout() {\r\n    localStorage.removeItem('agentToken');\r\n    localStorage.removeItem('agentData');\r\n    router.push('/');\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center\">\r\n        <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-emerald-500 border-t-transparent\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-linear-to-br from-slate-900 via-slate-800 to-slate-900\">\r\n      {/* Header */}\r\n      <header className=\"border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm sticky top-0 z-40\">\r\n        <div className=\"mx-auto max-w-6xl px-6 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 rounded-xl bg-linear-to-br from-emerald-500 to-blue-600 flex items-center justify-center\">\r\n                <span className=\"text-xl\">üé∞</span>\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-lg font-bold text-white\">{agent?.name}</h1>\r\n                <p className=\"text-xs text-slate-400\">{agent?.email}</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2 bg-slate-700/50 rounded-xl px-6 py-3 border border-slate-600\">\r\n              <span className=\"text-2xl\">üé∞</span>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-xs text-slate-400\">Cr√©ditos de Spin</p>\r\n                <p className={`text-2xl font-bold ${Number(agent?.spinCredits) > 0 ? 'text-emerald-400' : 'text-red-400'}`}>\r\n                  {Math.floor(Number(agent?.spinCredits || 0))} cr√©ditos\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"flex items-center gap-2 rounded-lg bg-slate-700 hover:bg-red-600/20 hover:text-red-400 border border-slate-600 hover:border-red-500/50 px-4 py-2 text-sm text-slate-300 transition\"\r\n            >\r\n              <span>üö™</span>\r\n              Sair\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"border-b border-slate-700/50 bg-slate-800/30\">\r\n        <div className=\"mx-auto max-w-6xl px-6\">\r\n          <div className=\"flex gap-1\">\r\n            <Link\r\n              href=\"/dashboard\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üìä Dashboard\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/pool\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üè¶ Pool\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/games\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üéÆ Jogos\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/transactions\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üìã Transa√ß√µes\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/integration\"\r\n              className=\"px-4 py-3 text-sm font-medium text-slate-400 hover:text-white border-b-2 border-transparent hover:border-slate-600 transition\"\r\n            >\r\n              üîó Integra√ß√£o\r\n            </Link>\r\n            <Link\r\n              href=\"/dashboard/settings\"\r\n              className=\"px-4 py-3 text-sm font-medium text-emerald-400 border-b-2 border-emerald-400\"\r\n            >\r\n              ‚öôÔ∏è Configura√ß√µes\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"mx-auto max-w-6xl px-6 py-8\">\r\n        <div className=\"mb-6\">\r\n          <h2 className=\"text-2xl font-semibold text-white\">‚öôÔ∏è Configura√ß√µes</h2>\r\n          <p className=\"text-slate-400 text-sm mt-1\">Gerencie suas prefer√™ncias e seguran√ßa</p>\r\n        </div>\r\n\r\n        {/* Password Change Card */}\r\n        <div className=\"rounded-xl border border-slate-700 bg-slate-800/50 overflow-hidden max-w-xl\">\r\n          <div className=\"px-6 py-4 border-b border-slate-700\">\r\n            <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\r\n              <span>üîê</span> Alterar Senha\r\n            </h3>\r\n          </div>\r\n\r\n          <form onSubmit={handleChangePassword} className=\"p-6 space-y-4\">\r\n            {passwordError && (\r\n              <div className=\"p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-300 text-sm\">\r\n                {passwordError}\r\n              </div>\r\n            )}\r\n\r\n            {passwordSuccess && (\r\n              <div className=\"p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-300 text-sm\">\r\n                {passwordSuccess}\r\n              </div>\r\n            )}\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-400 mb-1\">\r\n                Senha Atual\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={currentPassword}\r\n                onChange={(e) => setCurrentPassword(e.target.value)}\r\n                className=\"w-full rounded-lg bg-slate-900 border border-slate-600 px-4 py-2.5 text-white placeholder:text-slate-500 focus:border-emerald-500 focus:outline-none\"\r\n                placeholder=\"Digite sua senha atual\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-400 mb-1\">\r\n                Nova Senha\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={newPassword}\r\n                onChange={(e) => setNewPassword(e.target.value)}\r\n                className=\"w-full rounded-lg bg-slate-900 border border-slate-600 px-4 py-2.5 text-white placeholder:text-slate-500 focus:border-emerald-500 focus:outline-none\"\r\n                placeholder=\"Digite a nova senha (m√≠n. 6 caracteres)\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-400 mb-1\">\r\n                Confirmar Nova Senha\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                className=\"w-full rounded-lg bg-slate-900 border border-slate-600 px-4 py-2.5 text-white placeholder:text-slate-500 focus:border-emerald-500 focus:outline-none\"\r\n                placeholder=\"Confirme a nova senha\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={passwordLoading}\r\n              className=\"w-full rounded-lg bg-emerald-600 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-500 transition disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {passwordLoading ? 'Salvando...' : 'Alterar Senha'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAce,SAAS;;IACtB,MAAM,SAAS,IAAA,oKAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,2LAAQ,EAAe;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2LAAQ,EAAC;IAEvC,wBAAwB;IACxB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2LAAQ,EAAC;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2LAAQ,EAAC;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2LAAQ,EAAC;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2LAAQ,EAAC;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,2LAAQ,EAAC;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,2LAAQ,EAAC;IAEvD,IAAA,4LAAS;kCAAC;YACR,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,YAAY,aAAa,OAAO,CAAC;YAEvC,IAAI,CAAC,SAAS,CAAC,WAAW;gBACxB,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,SAAS,KAAK,KAAK,CAAC;YACpB,WAAW;QACb;iCAAG;QAAC;KAAO;IAEX,eAAe,qBAAqB,CAAkB;QACpD,EAAE,cAAc;QAChB,iBAAiB;QACjB,mBAAmB;QAEnB,IAAI,YAAY,MAAM,GAAG,GAAG;YAC1B,iBAAiB;YACjB;QACF;QAEA,IAAI,gBAAgB,iBAAiB;YACnC,iBAAiB;YACjB;QACF;QAEA,mBAAmB;QAEnB,IAAI;YACF,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,MAAM,MAAM,MAAM,GAAG,sJAAS,CAAC,SAAS,CAAC,EAAE;gBAC/C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA;gBACF;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,OAAO,EAAE;gBAChB,mBAAmB;gBACnB,mBAAmB;gBACnB,eAAe;gBACf,mBAAmB;YACrB,OAAO;gBACL,iBAAiB,KAAK,OAAO,IAAI;YACnC;QACF,EAAE,OAAO,KAAK;YACZ,iBAAiB;QACnB,SAAU;YACR,mBAAmB;QACrB;IACF;IAEA,SAAS;QACP,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,IAAI,SAAS;QACX,qBACE,+MAAC;YAAI,WAAU;sBACb,cAAA,+MAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,qBACE,+MAAC;QAAI,WAAU;;0BAEb,+MAAC;gBAAO,WAAU;0BAChB,cAAA,+MAAC;oBAAI,WAAU;8BACb,cAAA,+MAAC;wBAAI,WAAU;;0CACb,+MAAC;gCAAI,WAAU;;kDACb,+MAAC;wCAAI,WAAU;kDACb,cAAA,+MAAC;4CAAK,WAAU;sDAAU;;;;;;;;;;;kDAE5B,+MAAC;;0DACC,+MAAC;gDAAG,WAAU;0DAAgC,OAAO;;;;;;0DACrD,+MAAC;gDAAE,WAAU;0DAA0B,OAAO;;;;;;;;;;;;;;;;;;0CAIlD,+MAAC;gCAAI,WAAU;;kDACb,+MAAC;wCAAK,WAAU;kDAAW;;;;;;kDAC3B,+MAAC;wCAAI,WAAU;;0DACb,+MAAC;gDAAE,WAAU;0DAAyB;;;;;;0DACtC,+MAAC;gDAAE,WAAW,CAAC,mBAAmB,EAAE,OAAO,OAAO,eAAe,IAAI,qBAAqB,gBAAgB;;oDACvG,KAAK,KAAK,CAAC,OAAO,OAAO,eAAe;oDAAI;;;;;;;;;;;;;;;;;;;0CAKnD,+MAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,+MAAC;kDAAK;;;;;;oCAAS;;;;;;;;;;;;;;;;;;;;;;;0BAQvB,+MAAC;gBAAI,WAAU;0BACb,cAAA,+MAAC;oBAAI,WAAU;8BACb,cAAA,+MAAC;wBAAI,WAAU;;0CACb,+MAAC,4LAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,+MAAC,4LAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,+MAAC,4LAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,+MAAC,4LAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,+MAAC,4LAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,+MAAC,4LAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;0BAQP,+MAAC;gBAAK,WAAU;;kCACd,+MAAC;wBAAI,WAAU;;0CACb,+MAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,+MAAC;gCAAE,WAAU;0CAA8B;;;;;;;;;;;;kCAI7C,+MAAC;wBAAI,WAAU;;0CACb,+MAAC;gCAAI,WAAU;0CACb,cAAA,+MAAC;oCAAG,WAAU;;sDACZ,+MAAC;sDAAK;;;;;;wCAAS;;;;;;;;;;;;0CAInB,+MAAC;gCAAK,UAAU;gCAAsB,WAAU;;oCAC7C,+BACC,+MAAC;wCAAI,WAAU;kDACZ;;;;;;oCAIJ,iCACC,+MAAC;wCAAI,WAAU;kDACZ;;;;;;kDAIL,+MAAC;;0DACC,+MAAC;gDAAM,WAAU;0DAAgD;;;;;;0DAGjE,+MAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gDAClD,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;;;;;;;kDAIZ,+MAAC;;0DACC,+MAAC;gDAAM,WAAU;0DAAgD;;;;;;0DAGjE,+MAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;;;;;;;kDAIZ,+MAAC;;0DACC,+MAAC;gDAAM,WAAU;0DAAgD;;;;;;0DAGjE,+MAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gDAClD,WAAU;gDACV,aAAY;gDACZ,QAAQ;;;;;;;;;;;;kDAIZ,+MAAC;wCACC,MAAK;wCACL,UAAU;wCACV,WAAU;kDAET,kBAAkB,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjD;GA3PwB;;QACP,oKAAS;;;KADF"}}]
}